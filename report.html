<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Virtual Coach AI — Swing Report</title><style>:root{--panel:#16242e;--muted:#345a72;--ink:#0c1f2b;--txt:#0f2330;--accent:#5eb3ff;--ok:#19c37d;--warn:#f6c453;--bad:#ff6b6b;--chip:#fff;--radius:16px;--shadow:0 8px 24px rgba(0,0,0,.25)}*{box-sizing:border-box}html,body{height:100%}body{margin:0;color:var(--txt);font:16px/1.45 system-ui,-apple-system,Segoe UI,Inter,Roboto,Helvetica,Arial,sans-serif;background:#e9f4fb}.bg{position:fixed;inset:0;z-index:-1;background:linear-gradient(0deg,rgba(255,255,255,.58),rgba(255,255,255,.58)),url('/homepage-background.png') center/cover no-repeat fixed,url('/golf-course-bg.jpg') center/cover no-repeat fixed,url('/virtualcoach-bg.png') center/cover no-repeat fixed;background-color:#e9f4fb}.wrap{max-width:1100px;margin:28px auto;padding:0 16px}header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:16px}.title{font-size:26px;font-weight:800;letter-spacing:.2px;color:var(--ink)}.sub{color:var(--muted);font-size:13px}.toolbar{display:flex;flex-wrap:wrap;gap:10px;align-items:center}.btn,.select{background:#ffffffd9;border:1px solid #d3e3ee;border-radius:12px;color:var(--ink);padding:8px 12px;box-shadow:var(--shadow);cursor:pointer}.select{appearance:none;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#083048" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>');background-repeat:no-repeat;background-position:right 10px center;padding-right:36px}.badge{background:#fff;border:1px solid #d3e3ee;color:var(--ink);padding:6px 10px;border-radius:999px;font-size:12px}.card,details.panel{background:#ffffffe6;border:1px solid #d3e3ee;border-radius:var(--radius);box-shadow:var(--shadow)}.card h3{margin:0;padding:14px 16px;border-bottom:1px solid #e0edf5;color:var(--ink)}.card .content{padding:12px 16px}summary{list-style:none;display:flex;gap:10px;align-items:center;padding:14px 16px;cursor:pointer}summary::-webkit-details-marker{display:none}.pnum{width:34px;height:34px;border-radius:10px;background:#eef6fb;border:1px solid #d3e3ee;display:grid;place-items:center;font-weight:800;color:var(--ink)}.pname{font-weight:700;color:var(--ink)}.caret{margin-left:auto;transition:transform .2s ease}details[open] .caret{transform:rotate(180deg)}.gchip{font-size:12px;font-weight:700;padding:3px 8px;border-radius:8px;border:1px solid #d3e3ee;background:#fff}.g-good{color:#0a8c5b}.g-ok{color:#a97800}.g-bad{color:#c73838}.metric{display:flex;align-items:center;gap:10px;margin:9px 0}.metric .name{flex:0 0 230px;color:#10344a}.bar{flex:1;height:10px;border-radius:999px;background:#e8f2f9;border:1px solid #d3e3ee;position:relative;overflow:hidden}.bar>span{position:absolute;left:0;top:0;bottom:0;border-radius:999px}.ok{background:linear-gradient(90deg,#19c37d,#2bd897)}.warn{background:linear-gradient(90deg,#f6c453,#ffd479)}.bad{background:linear-gradient(90deg,#ff6b6b,#ff8f8f)}.pct{width:52px;text-align:right;color:#0c2433}.grid{display:grid;grid-template-columns:1fr;gap:14px}@media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}.busy{position:fixed;top:12px;right:12px;background:#ffffff;border:1px solid #d3e3ee;border-radius:999px;padding:8px 12px;display:flex;gap:8px;align-items:center;box-shadow:var(--shadow);z-index:10000}.busy[hidden]{display:none!important}.spinner{width:18px;height:18px;border:3px solid #e0edf5;border-top-color:#5eb3ff;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}</style></head><body data-report-src="/report.json"><div class="bg" aria-hidden="true"></div><div id="busy" class="busy" hidden><span class="spinner" aria-hidden="true"></span><span id="busyText">Processing…</span></div><div class="wrap"><header><div><div class="title">Swing Report — P1–P9</div><div class="sub">Date: <span id="date"></span> • Mode: <span id="modeLabel">Full Swing</span></div></div><div class="toolbar"><label class="badge">Swings: <span id="swingCount">1</span></label><select id="discipline" class="select" title="Shot type"><option value="full-swing" selected>Full Swing</option><option value="chipping">Chipping</option><option value="putting">Putting</option></select><select id="focus" class="select" title="Focus filter"><option value="all" selected>Focus: All</option><optgroup label="Upper Body"><option value="right-wrist">Right Wrist</option><option value="left-wrist">Left Wrist</option><option value="arm-bend">Arm Bend</option><option value="hand-path">Hand Path</option><option value="shoulder-turn">Shoulder Turn</option></optgroup><optgroup label="Lower Body"><option value="hip-movement">Hip Movement</option><option value="knee-movement">Knee Movement</option><option value="foot-movement">Foot / Pressure</option><option value="lead-leg-brake">Lead Leg Braking</option></optgroup><optgroup label="Club"><option value="club-path">Club Path</option><option value="face-angle">Club Face Angle</option><option value="tempo">Timing & Tempo</option></optgroup></select><button id="expandAll" class="btn" type="button">Expand All</button><button id="collapseAll" class="btn" type="button">Collapse All</button><button id="reload" class="btn" type="button">Reload Report</button><button id="sample" class="btn" type="button">Load Sample</button></div></header><section id="plistWrap"><div class="sub">Click a P-section to expand. Use the Focus filter to dim everything except what you care about.</div><div id="plist"></div></section><section class="card" style="margin-top:12px"><h3>Coaching Card</h3><div class="content"><details class="panel" open><summary><span class="pname">Top 3 Priority Fixes</span><svg class="caret" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg></summary><div id="coachPriority"></div></details><details class="panel" style="margin-top:10px"><summary><span class="pname">Top 3 Power Fixes</span><svg class="caret" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg></summary><div id="coachPower"></div></details></div></section><section class="card" style="margin-top:12px"><h3>14‑Day Practice Plan</h3><div id="practice" class="content"></div></section><section class="grid" style="margin-top:12px"><div class="card"><h3>Position Consistency</h3><div id="position" class="content"></div></div><div class="card"><h3>Swing Consistency</h3><div id="swing" class="content"></div></div></section><section class="card" style="margin-top:12px"><h3>Power Score Summary</h3><div id="power" class="content"></div></section><div id="status" class="sub" style="margin-top:8px"></div><div id="error" class="sub" style="color:#b42323"></div><details id="debug" class="sub" style="margin-top:6px"><summary>Debug</summary><pre id="debugOut" style="white-space:pre-wrap;background:#f3f9fd;border:1px solid #d3e3ee;padding:8px;border-radius:8px;max-height:260px;overflow:auto"></pre></details></div><div id="videoOverlay" class="busy" hidden><span class="spinner" aria-hidden="true"></span><span>Loading video…</span></div><script>const $=s=>document.querySelector(s),$$=s=>document.querySelectorAll(s);$('#date').textContent=new Date().toLocaleDateString();(function(){try{const bg=$('.bg'),c=['/homepage-background.png','/golf-course-bg.jpg','/virtualcoach-bg.png'];function pick(i){if(!bg||i>=c.length)return;const raw=c[i],img=new Image();img.onload=()=>{bg.style.backgroundImage=`linear-gradient(0deg,rgba(255,255,255,.58),rgba(255,255,255,.58)),url('${raw}')`};img.onerror=()=>pick(i+1);img.src=raw+'?v='+Date.now()}const cur=getComputedStyle(bg).backgroundImage;if(!cur||cur==='none')pick(0)}catch(_){}})();const fmt=v=>`${v}%`,band=v=>v>=75?'ok':v>=55?'warn':'bad',metricRow=m=>`<div class="metric" data-tags="${(m.tags||[]).join(' ')}"><div class="name">${m.label}</div><div class="bar"><span class="${band(m.value)}" style="width:${m.value}%"></span></div><div class="pct">${fmt(m.value)}</div></div>`,posRow=p=>`<div class="metric"><div class="name">${p.p}</div><div class="bar"><span class="${band(p.value)}" style="width:${p.value}%"></span></div><div class="pct">${fmt(p.value)}</div></div>`;const long={P1:'Neutral grip (trail hand in fingers), soft knees, pelvis neutral. Pressure 55/45 lead-to-trail under arches; ball position matches club. Spine tall, shoulders relaxed, eye line level.',P2:'Shaft reaches parallel with width; hands in front of chest; wrists set gradually. Face near neutral (toe-up), not shut/open. Pressure loads trail foot without sway.',P3:'Lead arm parallel with full torso turn. Trail elbow folds in front of ribcage (no fly). Handle ~a forearm off chest—maintain width. Club on plane; head steady.',P4:'Top: pressure mostly trail heel; trail hip deep. Lead wrist nearer flat/bowed than cupped to manage face. Avoid across-the-line/laid-off extremes. Keep height.',P5:'Transition: pelvis → torso → arms. Shaft shallows; trail elbow stays in front of side seam. Maintain lead-wrist flexion; pressure moves into lead mid-foot.',P6:'Delivery: shaft parallel approaching ball; hands slightly ahead. Trail elbow tucked; face in the window (not wide open). Pelvis keeps turning—no stall.',P7:'Impact: forward shaft lean, low point forward. Pelvis 30–45° open; chest 10–20° open; lead leg braced. Face close to square to path; solid middle-low groove strike.',P8:'Post-impact: trail arm extends; handle works around (not straight down line). Control rate of closure—no flip. Divot after ball; chest up/left.',P9:'Finish: pressure fully lead side; belt buckle/chest to target; trail toe down. Hold the pose without wobble.'};function renderReport(d){if(d.discipline)$('#modeLabel').textContent=/putt/i.test(d.discipline)?'Putting':/chip/i.test(d.discipline)?'Chipping':'Full Swing';if(d.swings!=null)$('#swingCount').textContent=String(d.swings);$('#swing').innerHTML=(d.swing_metrics||[]).map(metricRow).join('')||'<div class="sub">No swing metrics.</div>';$('#position').innerHTML=(d.position_metrics||[]).map(posRow).join('')||'<div class="sub">No position metrics.</div>';const p=d.power||{score:0,tempo:'—',release_timing:0};$('#power').innerHTML=`<div class="metric"><div class="name">Power Score</div><div class="bar"><span class="${band(p.score)}" style="width:${p.score}%"></span></div><div class="pct">${fmt(p.score)}</div></div><div class="metric"><div class="name">Tempo</div><div class="bar"><span class="ok" style="width:76%"></span></div><div class="pct">${p.tempo}</div></div><div class="metric"><div class="name">Release Timing</div><div class="bar"><span class="${band(+p.release_timing)}" style="width:${+p.release_timing||0}%"></span></div><div class="pct">${+p.release_timing||0}%</div></div>`;let phases=Array.isArray(d.phases)?d.phases.slice():[];if(!phases.length){const names=['Setup','Shaft Parallel (Backswing)','Lead Arm Parallel (Backswing)','Top of Swing','Lead Arm Parallel (Downswing)','Shaft Parallel (Downswing)','Impact','Trail Arm Parallel (Follow-Through)','Finish'],pm=d.position_metrics||[];for(let i=0;i<9;i++){const pid='P'+(i+1),m=pm.find(x=>String(x.p).toUpperCase()===pid)||{value:0},g=m.value>=75?'good':m.value>=55?'ok':'bad';phases.push({id:pid,name:names[i],short:'',long:'',grade:g})}}$('#plist').innerHTML=phases.map((ph,i)=>`<details ${i===0?'open':''} class="panel"><summary><span class="pnum">${ph.id||('P'+(i+1))}</span><span class="pname">${ph.name||''}</span><span class="gchip g-${(ph.grade||'ok')}" style="margin-left:8px">${String(ph.grade||'OK').toUpperCase()}</span><span class="sub" style="margin-left:8px">${ph.short||''}</span><svg class="caret" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg></summary><div class="content"><div class="sub" style="margin-bottom:8px">${ph.short||''}</div><div style="margin-bottom:10px">${(ph.long&&ph.long.trim()&&ph.long.trim()!==(ph.short||'').trim())?ph.long:(long[ph.id||('P'+(i+1))]||'')}</div><button class="btn view-video" data-url="${ph.video||ph.video_url||''}">View Video</button></div></details>`).join('');const pri=(d.coaching&&Array.isArray(d.coaching.priority_fixes))?d.coaching.priority_fixes:[{title:'Clubface control at P7 (impact)',short:'Match face to path window.',long:'Face angle drifting open from P6→P7. Do a neutral grip check, then add lead‑wrist flexion (bowing) from P5→P6. Eight 9‑to‑3 half‑swings keeping the glove logo at the target through P7; video two reps.'},{title:'Lower body sequence',short:'Clear hips before hands.',long:'Hands are firing early. Feel the lead hip clear as pressure shifts to the lead heel right from P4. Use the step‑through drill: make a backswing, step toward the target as you start down, then swing.'},{title:'Hand path width',short:'Avoid collapse at P3.',long:'At P3 your hand path narrows. Do three‑stage pump‑downs (P3 → mini P4 → P5) maintaining width with trail elbow connected. Ten rehearsals, then three balls.'}],pow=(d.coaching&&Array.isArray(d.coaching.power_fixes))?d.coaching.power_fixes:[{title:'Tempo 3:1',short:'Smooth it out.',long:'Backswing is too quick. Count “one‑two‑three” back and “one” through. Use a 72‑bpm metronome and strike on every 4th tick for 12 balls.'},{title:'Lead‑leg brake',short:'Post into lead side.',long:'Plant the lead heel from P4 and feel the lead leg straighten through P5–P6. Place a towel under the lead heel for feedback—ten rehearsals, then five balls.'},{title:'Late release timing',short:'Deliver speed at P7–P8.',long:'Hold wrist angles to P6, then unhinge through impact. Set a two‑tee gate at the ball; clip both tees post‑impact. Two sets of five.'}];const mk=i=>`<details class="panel"><summary><span class="pname">${i.title}</span><span class="sub" style="margin-left:8px">${i.short||''}</span><svg class="caret" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg></summary><div class="content">${i.long||''}</div></details>`;$('#coachPriority').innerHTML=pri.map(mk).join('');$('#coachPower').innerHTML=pow.map(mk).join('');const plan=(d.practice_plan&&Array.isArray(d.practice_plan))?d.practice_plan:Array.from({length:14},(_,i)=>({day:i+1,title:(i%2?'Contact + Face':'Tempo + Sequence'),drills:['9‑to‑3 × 15 (clip P6→P8).','Step‑through × 10 (lead‑leg brake).','Gate drill × 15.']}));$('#practice').innerHTML=plan.map(d=>`<details class="panel" ${d.day===1?'open':''}><summary><span class="pname">Day ${d.day}</span><span class="sub" style="margin-left:8px">${d.title||''}</span><svg class="caret" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg></summary><div class="content">${(d.drills||[]).map(x=>`<div>• ${x}</div>`).join('')||'<div class="sub">No drills provided.</div>'}</div></details>`).join('')}function sanitize(t){return (t||'').replace(/^﻿/,'').replace(/[​-‏‪-‮]/g,'').replace(/^[^\[{]*/,'').replace(/[^\]}]*$/,'').replace(/[
