<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Virtual Coach AI — Swing Report (Stable Minimal)</title>
  <style>
    :root{ --ink:#0c1f2b; --muted:#3b6178; --ok:#19c37d; --warn:#f5b301; --bad:#e03131; --radius:16px; --shadow:0 8px 24px rgba(0,0,0,.18); }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;color:#0f2330;font:16px/1.45 system-ui,-apple-system,Segoe UI,Inter,Roboto,Helvetica,Arial,sans-serif;background:#e9f4fb}
    .bg{position:fixed;inset:0;z-index:-1;background:url('/homepage-background.png') center/cover no-repeat fixed}
    .wrap{max-width:1100px;margin:28px auto;padding:0 16px}
    header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:16px}
    .title{font-size:26px;font-weight:800;letter-spacing:.2px;color:var(--ink)}
    .sub{color:var(--muted);font-size:13px}
    .toolbar{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    .btn,.select{background:rgba(255,255,255,.85);border:1px solid #d3e3ee;border-radius:12px;color:var(--ink);padding:8px 12px;box-shadow:var(--shadow);cursor:pointer}
    .badge{background:#fff;border:1px solid #d3e3ee;color:var(--ink);padding:6px 10px;border-radius:999px;font-size:12px}

    .card,details.panel{background:rgba(255,255,255,.30);border:1px solid #d8eaf6;border-radius:var(--radius);box-shadow:var(--shadow);backdrop-filter:saturate(120%) blur(2px)}
    .card h3{margin:0;padding:14px 16px;border-bottom:1px solid #e0edf5;color:var(--ink)}
    .card .content{padding:12px 16px}

    summary{list-style:none;display:flex;gap:10px;align-items:center;padding:14px 16px;cursor:pointer}
    summary::-webkit-details-marker{display:none}
    .pnum{width:34px;height:34px;border-radius:10px;background:#eef6fb;border:1px solid #d3e3ee;display:grid;place-items:center;font-weight:800;color:var(--ink)}
    .pname{font-weight:700;color:var(--ink)}
    .caret{margin-left:auto;transition:transform .2s ease}
    details[open] .caret{transform:rotate(180deg)}
    .gchip{font-size:12px;font-weight:700;padding:3px 8px;border-radius:8px;border:1px solid transparent;background:transparent;color:#fff}
    .g-good{background:var(--ok);border-color:var(--ok)} .g-ok{background:var(--warn);border-color:var(--warn)} .g-bad{background:var(--bad);border-color:var(--bad)}

    .metric{display:flex;align-items:center;gap:10px;margin:9px 0}
    .metric .name{flex:0 0 230px;color:#10344a}
    .bar{flex:1;height:10px;border-radius:999px;background:#e8f2f9;border:1px solid #d3e3ee;position:relative;overflow:hidden}
    .bar>span{position:absolute;left:0;top:0;bottom:0;border-radius:999px}
    .ok{background:linear-gradient(90deg,#19c37d,#2bd897)}
    .warn{background:linear-gradient(90deg,#f6c253,#ffd479)}
    .bad{background:linear-gradient(90deg,#e03131,#ff8f8f)}
    .pct{width:52px;text-align:right;color:#0c2433}

    .grid{display:grid;grid-template-columns:1fr;gap:14px}
    @media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}
  
    /* Info buttons & callouts */
    .info-btn{margin-left:8px;font-size:12px;line-height:1;background:rgba(255,255,255,.75);border:1px solid #d3e3ee;border-radius:999px;padding:4px 8px;cursor:pointer}
    .info-btn:hover{background:#fff}
    .info-callout{margin-top:10px;background:rgba(255,255,255,.65);border:1px solid #d8eaf6;border-radius:12px;padding:10px;color:#0c2433}
    /* Reference Video button */
    .video-btn{margin-left:8px;font-size:12px;line-height:1;background:rgba(255,255,255,.9);border:1px solid #d3e3ee;border-radius:999px;padding:4px 8px;cursor:pointer}
    .video-btn:hover{background:#fff}
    .video-btn::before{content:"▶";display:inline-block;margin-right:6px;font-size:11px}
    /* Hide debug panel */
    #debug{display:none!important}
</style>
</head>
<body data-report-src="/report.json">
  <div class="bg" aria-hidden="true"></div>
  <div class="wrap">
    <header>
      <div>
        <div class="title">Swing Report — P1–P9</div>
        <div class="sub">Date: <span id="date"></span> • Mode: <span id="modeLabel">Full Swing</span></div>
      </div>
      <div class="toolbar">
        <label class="badge">Swings: <span id="swingCount">1</span></label>
        <select id="discipline" class="select"><option value="full-swing" selected>Full Swing</option><option value="chipping">Chipping</option><option value="putting">Putting</option></select>
        <button id="reload" class="btn" type="button">Reload</button>
        <button id="sample" class="btn" type="button">Load Sample</button>
      </div>
    </header>

    <section id="plistWrap">
      <div class="sub">P1–P9 (click a row to expand)</div>
      <div id="plist"></div>
    </section>

    <section class="card" style="margin-top:12px"><h3>Coaching Card</h3><div class="content"><details class="panel" open><summary><span class="pname">Top 3 Priority Fixes</span><svg class="caret" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg></summary><div id="coachPriority"></div></details><details class="panel" style="margin-top:10px"><summary><span class="pname">Top 3 Power Fixes</span><svg class="caret" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg></summary><div id="coachPower"></div></details></div></section>

    <section class="grid" style="margin-top:12px">
      <div class="card"><h3>Position Consistency <button class="info-btn" type="button" data-target="info-position">Info</button></h3><div class="content"><div id="position"></div><div id="info-position" class="info-callout" hidden>Position Consistency shows how repeatable your setup and checkpoints (P1–P9) are across the swings in this report. It’s not “textbook form”—it’s how reliably <em>you</em> hit your own model. High scores mean you’re arriving in similar alignments each time.</div></div></div>
      <div class="card"><h3>Swing Consistency <button class="info-btn" type="button" data-target="info-swing">Info</button></h3><div class="content"><div id="swing"></div><div id="info-swing" class="info-callout" hidden>Swing Consistency tracks key dynamic metrics—arm angles, face‑to‑path, club path, attack angle, tempo, etc.—and how much they vary swing‑to‑swing. Higher = steadier delivery; lower = timing/coordination changes.</div></div></div>
    </section>

    <section class="card" style="margin-top:12px"><h3>Power Score Summary <button class="info-btn" type="button" data-target="info-power">Info</button></h3><div class="content"><div id="power"></div><div id="info-power" class="info-callout" hidden>Power Score is a 0–100 index of how effectively you produce and deliver speed. It blends tempo, sequencing, release timing, and impact delivery. 75+ tends to feel “easy speed”; 55–74 is workable; below 55 suggests efficiency leaks.</div></div></section>

    <div id="status" class="sub" style="margin-top:8px"></div>
    <div id="error" class="sub" style="color:#b42323"></div>
    <details id="debug" class="sub" style="margin-top:6px"><summary>Debug</summary><pre id="debugOut" style="white-space:pre-wrap;background:#f3f9fd;border:1px solid #d3e3ee;padding:8px;border-radius:8px;max-height:260px;overflow:auto"></pre></details>
  </div>

<script>
const $ = s => document.querySelector(s);
$('#date').textContent = new Date().toLocaleDateString();

const band = v => v>=75?'ok':v>=55?'warn':'bad';
const fmt  = v => `${v}%`;
const metricRow = m => `<div class="metric"><div class="name">${m.label}</div><div class="bar"><span class="${band(m.value)}" style="width:${m.value}%"></span></div><div class="pct">${fmt(m.value)}</div></div>`;
const posRow    = p => `<div class="metric"><div class="name">${p.p}</div><div class="bar"><span class="${band(p.value)}" style="width:${p.value}%"></span></div><div class="pct">${fmt(p.value)}</div></div>`;

const defaultNames=['Setup','Shaft Parallel (Backswing)','Lead Arm Parallel (Backswing)','Top of Swing','Lead Arm Parallel (Downswing)','Shaft Parallel (Downswing)','Impact','Trail Arm Parallel (Follow-Through)','Finish'];
const defaultShort={
  P1:'Athletic setup—tall spine, neutral grip, 55/45 pressure.',
  P2:'Width maintained; toe‑up face; gentle early wrist set.',
  P3:'Lead arm parallel; full turn; width kept from chest.',
  P4:'Top: trail hip deep; flatter lead wrist; steady head.',
  P5:'Transition: pelvis leads; shaft shallows; pressure left.',
  P6:'Delivery: hands ahead; trail elbow tucked; face square.',
  P7:'Impact: forward lean; hips open; low point forward.',
  P8:'Through: extend trail arm; rotate; zero flip.',
  P9:'Finish: balanced over lead side; hold the pose.'
};
const defaultLong={
  P1:'Address like an athlete: neutral grip (trail hand in fingers), soft knees, pelvis neutral. Feel 55/45 pressure under the arches—lead foot slightly heavier for irons. Chin up, spine long, eyes level. Cue: “zipper tall, arms soft.” Common miss: slumped chest and ball too far back. Fix that first and most setup issues vanish.',
  P2:'When the shaft is parallel, keep width—hands stay in front of the chest. Allow a gentle wrist set; the face should look close to toe‑up (neutral), not shut or wide open. Feel pressure loading into the trail foot without swaying off the ball. Self‑check: pause here in slow reps; if the clubhead is behind your hands and toe‑up-ish, you’re good.',
  P3:'Lead arm parallel with the body fully turned. Trail elbow folds in front of the ribcage (not behind it) so you keep width about a forearm off the chest. Club on plane, head steady. Feel: “turn, don’t lift.” If you crowd your chest here, you’ll likely go across‑the‑line later—keep that space.',
  P4:'At the top, let pressure live mostly in the trail heel; trail hip deep, not sliding. Prefer a flatter/bowed lead wrist over a cupped one to stabilize the face. Head steady, arms soft. If the club gets across‑the‑line or laid off, it’s usually a width/forearm rotation problem earlier—rehearse P3 → P4 without adding extra lift.',
  P5:'Transition is sequenced: pelvis, then torso, then arms. The shaft shallows a touch as the trail elbow stays in front of your side seam. Keep lead‑wrist flexion to control the face and shift pressure into the lead mid‑foot. Feel: “bump, turn, drop.” If the hands race first, you’ll steepen—slow them down for one beat.',
  P6:'Delivery position (shaft parallel on the way down): hands slightly ahead of the clubhead, trail elbow tucked, face living in the “window” (not shutting or hanging open). Pelvis keeps turning—no stall. A great checkpoint for strike: if your hands are ahead here, forward shaft lean at impact gets easier.',
  P7:'Impact isn’t a pose, it’s a pass‑through—but the look is consistent: forward shaft lean, low point forward, hips ~30–45° open, chest ~10–20° open, lead leg braced. Face near square to the path so start‑line isn’t a surprise. Feel: “turn through a firm lead side.”',
  P8:'Post‑impact, extend that trail arm and let the handle work around you, not straight down the line. Chest turns up and left; rate of closure is controlled—no flip. Divot in front of the ball tells you you delivered loft and struck it solid.',
  P9:'Finish balanced with everything stacked over the lead side. Belt buckle and chest at the target; trail toe down for balance. If you can freeze the finish without wobble, your motion and tempo were organized.'
};

function renderReport(d){
  if(d.discipline){ $('#modeLabel').textContent = /putt/i.test(d.discipline)?'Putting':/chip/i.test(d.discipline)?'Chipping':'Full Swing'; }
  if(d.swings!=null){ $('#swingCount').textContent = String(d.swings); }

  const swingArr = Array.isArray(d.swing_metrics)?d.swing_metrics:[];
  const posArr   = Array.isArray(d.position_metrics)?d.position_metrics:[];
  $('#swing').innerHTML   = swingArr.map(metricRow).join('') || '<div class="sub">No swing metrics.</div>';
  $('#position').innerHTML= posArr.map(posRow).join('')     || '<div class="sub">No position metrics.</div>';

  const p=d.power||{score:0,tempo:'—',release_timing:0};
  $('#power').innerHTML=
    `<div class="metric"><div class="name">Power Score</div><div class="bar"><span class="${band(p.score)}" style="width:${p.score}%"></span></div><div class="pct">${fmt(p.score)}</div></div>`+
    `<div class="metric"><div class="name">Tempo</div><div class="bar"><span class="ok" style="width:76%"></span></div><div class="pct">${p.tempo}</div></div>`+
    `<div class="metric"><div class="name">Release Timing</div><div class="bar"><span class="${band(+p.release_timing)}" style="width:${+p.release_timing||0}%"></span></div><div class="pct">${+p.release_timing||0}%</div></div>`;

  const pm = Array.isArray(d.position_metrics)?d.position_metrics:[];
  let phases = Array.isArray(d.phases)?d.phases.slice():[];
  const gradeFromVal = v => v>=75?'good':v>=55?'ok':'bad';
  const getPmVal = id => { const m=pm.find(x=>String(x.p).toUpperCase()===id); return m?+m.value||0:0; };
  for(let i=0;i<9;i++){
    const id='P'+(i+1);
    const base = phases.find(x=>String(x.id||'').toUpperCase()===id) || {};
    const shortText = (base.short && base.short.trim().length>24) ? base.short : (defaultShort[id] || base.short || '');
    const longText  = (base.long && base.long.trim() && base.long.trim()!==(shortText||'').trim()) ? base.long : (defaultLong[id]||'');
    phases[i] = { id, name: base.name || defaultNames[i], short: shortText, long: longText, grade: base.grade || gradeFromVal(getPmVal(id)) };
  }
  const gradeLabel={good:'Good', ok:'OK', bad:'Needs Help'};
  $('#plist').innerHTML = phases.map((ph,i)=>
    `<details ${i===0?'open':''} class="panel">
       <summary>
         <span class="pnum">${ph.id}</span>
         <span class="pname">${ph.name}</span>
         <span class="gchip g-${ph.grade}" style="margin-left:8px">${gradeLabel[ph.grade]||'OK'}</span>
         <span class="sub" style="margin-left:8px">${ph.short||''}</span>
         <svg class="caret" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
       </summary>
       <div class="content">
         <div class="sub" style="margin-bottom:8px">${ph.short||''}</div>
         <div style="margin-bottom:10px">${ph.long||''}</div>
         <div><button class="video-btn" type="button" data-q="golf ${ph.id} ${ph.name} drill">Reference Video</button></div>
       </div>
     </details>`
  ).join('');

  const pri=(d.coaching&&Array.isArray(d.coaching.priority_fixes))?d.coaching.priority_fixes:defaultPri;
  const pow=(d.coaching&&Array.isArray(d.coaching.power_fixes))?d.coaching.power_fixes:defaultPow;
  const mk = i => `
  <details class="panel">
    <summary>
      <span class="pname">${i.title}</span>
      <span class="sub" style="margin-left:8px">${i.short||''}</span>
      <svg class="caret" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
    </summary>
    <div class="content">
      ${i.long||''}
      <div style="margin-top:8px">
        <button class="video-btn" type="button" data-q="golf ${i.title} drill">Reference Video</button>
      </div>
    </div>
  </details>`;
  $('#coachPriority').innerHTML = pri.map(mk).join('');
  $('#coachPower').innerHTML   = pow.map(mk).join('');
}

const defaultPri=[
  {
    title:'Clubface control at P7 (impact)',
    short:'Match face to path',
    long:`<p><strong>Problem:</strong> The face drifts open from P6→P7, so starts leak right and you ride the face to save it.</p>
          <p><strong>Why it matters:</strong> Face-to-path owns start line and curvature. If the face is late, path has to get funky and contact suffers.</p>
          <p><strong>Feel:</strong> From P5→P6, flex (bow) the lead wrist and point the glove logo more at the target. Keep the logo facing the target through P7—no “roll save.”</p>
          <p><strong>Drills:</strong></p>
          <ul>
            <li><em>Mirror Check:</em> Stop at P6; lead wrist flatter/bowed, leading edge matching spine tilt. 5 slow reps → 5 half swings.</li>
            <li><em>Tee Gate:</em> Two tees: one at the ball, one 4" ahead. Clip both after impact. That means the face is stable <em>through</em> the ball.</li>
            <li><em>Impact Bag (soft strikes):</em> Half swings, hold the bag contact for 1 count with bowed lead wrist and shaft lean.</li>
          </ul>
          <p><strong>Prescription:</strong> 3 sets × (5 rehearsals + 5 half swings + 3 full swings). Video the last 2 full swings each set.</p>
          <p><strong>Quick checks:</strong> Ball starts closer to target; divot slightly ahead; no “face flip” in follow-through.</p>`
  },
  {
    title:'Lower body sequence',
    short:'Clear hips before hands',
    long:`<p><strong>Problem:</strong> Hands jump first from P4, path steepens, then the face has to flip to square—timing roulette.</p>
          <p><strong>Why:</strong> Efficient kinematic sequence is pelvis → torso → arms → club. Let the ground reaction force (lead side) unwind the system.</p>
          <p><strong>Feel:</strong> From the top, <em>plant</em> the lead heel, post into the lead leg, and spin the belt buckle open while the chest stays closed for a beat.</p>
          <p><strong>Drills:</strong></p>
          <ul>
            <li><em>Step‑Through:</em> Make a backswing, step into the lead foot as you start down, swing to balance. 2×10 reps, then 10 normal swings with the same feel.</li>
            <li><em>Post & Turn:</em> Without a ball, bump into the lead hip, straighten the lead leg as the pelvis keeps turning. 3×8 rehearsals.</li>
            <li><em>Split‑Stance Swings:</em> Narrow stance, lead toe flared; make 8 half swings feeling pressure driven into the lead heel.</li>
          </ul>
          <p><strong>Prescription:</strong> 3 blocks (8 rehearsals + 6 balls). “Tall finish” must be holdable for 2 counts.</p>
          <p><strong>Quick checks:</strong> By P6 you feel pressure under the lead heel; chest not stalling; contact moves slightly forward.</p>`
  },
  {
    title:'Hand path width',
    short:'Keep width at P3',
    long:`<p><strong>Problem:</strong> Width collapses by P3; trail elbow sneaks behind you → across‑the‑line or steep reroute later.</p>
          <p><strong>Why:</strong> Losing width early kills space and speed. Width keeps the club organized and makes shallowing automatic.</p>
          <p><strong>Feel:</strong> Imagine a small beach ball between sternum and hands—keep that forearm‑off‑chest gap. Trail elbow stays in front of your side seam.</p>
          <p><strong>Drills:</strong></p>
          <ul>
            <li><em>Pump‑Downs:</em> Rehearse P3 → mini P4 → P5 without collapsing the gap. 3×10 rehearsals.</li>
            <li><em>Split‑Hand Backswings:</em> Hands split by 2–3 inches; go to P3 maintaining width, then normal swings with the same feel.</li>
            <li><em>Stick Under Arms (lightly):</em> Short stick across biceps; turn to P3 keeping light contact—don’t crush it.</li>
          </ul>
          <p><strong>Prescription:</strong> 2 sets × (10 rehearsals + 6 balls). Film one from face‑on—check that hands stay a forearm’s width from the chest at P3.</p>
          <p><strong>Quick checks:</strong> Top is less across‑the‑line; delivery shallows easier; start‑line more predictable.</p>`
  }
];
const defaultPow=[
  {title:'Tempo 3:1', short:'Smooth, athletic rhythm', long:'Let’s make the swing feel unhurried going back and decisive through. Count “one‑two‑three” to the top and “one” through the ball. Use a metronome at ~72 bpm—hit every 4th tick for 12 balls, rest, repeat x3. Feel: the club is light on the way back and heavy through impact. Common miss: rushing the start. Fix: exhale at takeaway and keep your head still for the first beat.'},
  {title:'Lead‑leg brake', short:'Post into the lead side', long:'I want you to “hit the brakes” with the lead leg so the upper body can unwind. From P4, plant the lead heel and feel the lead leg straighten as the hips keep turning. Cue: push the ground away under the lead foot. Drill: towel under the lead heel—10 rehearsals, then 5 balls, repeat x3. Success check: you feel pressure under the lead heel by P5 and can hold a tall finish.'},
  {title:'Late release timing', short:'Hold, then let it go', long:'We’re saving the hit for after P6. Feel the angles (hinge and wrist flex) stay intact to delivery, then release through the ball—don’t throw early. Drill: two‑tee gate (one at the ball, one 4" ahead). Clip both tees after impact. Do 2×5 swings; video the last two to confirm the release is past the ball. Cue: “carry the lag to the front tee, then whip.”'}
];

function cleanJson(t){
  if(!t) return '';
  if(t.charCodeAt(0)===0xFEFF) t=t.slice(1);
  let out='';
  for(let i=0;i<t.length;i++){ const c=t.charCodeAt(i); if(c===9||c===10||c===13||(c>=32&&c!==127)) out+=t[i]; }
  let a=out.indexOf('{'); let a2=out.indexOf('['); if(a===-1||(a2!==-1&&a2<a)) a=a2; const b=Math.max(out.lastIndexOf('}'),out.lastIndexOf(']'));
  if(a>-1&&b>a) out=out.slice(a,b+1);
  return out.trim();
}

async function loadReport(url){
  const st=$('#status'), er=$('#error'), dbg=$('#debugOut');
  er.textContent=''; st.textContent='Loading '+url+'...'; if(dbg) dbg.textContent='';
  try{
    const res=await fetch(url,{cache:'no-store'});
    if(!res.ok) throw new Error('HTTP '+res.status);
    const raw=await res.text();
    const cleaned=cleanJson(raw);
    if (dbg) {
      dbg.textContent = `RAW (first 240):
${raw.slice(0,240)}

CLEAN (first 240):
${cleaned.slice(0,240)}`;
      document.getElementById('debug').open = true;
    }
    const data=JSON.parse(cleaned);
    renderReport(data);
    st.textContent='Loaded: '+url;
  }catch(err){
    er.textContent='Failed to load report: '+(err&&err.message?err.message:String(err));
    if (dbg) {
      dbg.textContent += `

ERROR: ${err && err.stack ? err.stack : err}`;
      document.getElementById('debug').open = true;
    }
    renderReport(sample);
    st.textContent='Loaded SAMPLE (parse failed): '+url;
  }
}

const sample={
  swings:1, discipline:'full-swing', power:{score:78, tempo:'3.0:1', release_timing:62},
  swing_metrics:[
    {label:'Right Arm Angle',value:84}, {label:'Club Face Angle',value:79}, {label:'Shoulder Turn',value:72}, {label:'Hip Turn',value:68},
    {label:'X-Factor (Shoulder-Hip)',value:64}, {label:'Club Path',value:71}, {label:'Face-to-Path',value:66}, {label:'Attack Angle',value:62}
  ],
  position_metrics:[{p:'P1',value:90},{p:'P2',value:74},{p:'P3',value:61},{p:'P4',value:55},{p:'P5',value:63},{p:'P6',value:70},{p:'P7',value:81},{p:'P8',value:86},{p:'P9',value:78}],
  phases:[]
};

(function(){
  const getPath=()=> new URLSearchParams(location.search).get('report') || document.body.dataset.reportSrc || '/report.json';
  document.getElementById('reload').addEventListener('click',()=>loadReport(getPath()));
  document.getElementById('sample').addEventListener('click',()=>{ renderReport(sample); document.getElementById('status').textContent='Loaded sample (no fetch).'; });
  loadReport(getPath());
})();

  // Info button toggles
  document.querySelectorAll('.info-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const t=document.getElementById(btn.dataset.target);
      if(t){ t.hidden=!t.hidden; }
    });
  });

// Reference Video buttons → open YouTube search in new tab (no regex to keep GitHub happy)
document.addEventListener('click',(e)=>{
  const btn=e.target.closest('.video-btn');
  if(!btn) return;
  const q=(btn.getAttribute('data-q')||'').trim();
  const url='https://www.youtube.com/results?search_query='+encodeURIComponent(q);
  window.open(url,'_blank','noopener');
});
</script></script>
</body>
</html>
