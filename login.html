<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<meta name="robots" content="noindex, nofollow" />
<title>Login — Virtual Coach AI</title>
<link rel="preload" as="image" href="/homepage-background.png" />
<style>
  :root{ --nav:#0b2b12; --scrim:rgba(0,0,0,.05); --panel:rgba(0,0,0,.30); --line:rgba(255,255,255,.12); --text:#f2f7f9; --muted:#cfe0e6; --maxw:980px; --radius:14px; --shadow:0 10px 24px rgba(0,0,0,.22);}
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial;background:url('/homepage-background.png') center/cover fixed no-repeat;}
  .scrim{min-height:100vh;background:var(--scrim)}
  main{width:min(var(--maxw),94%);margin:0 auto;padding:24px 0 40px;display:grid;place-items:center}
  .card{width:min(520px,94vw);padding:20px 18px 16px;border:1px solid var(--line);border-radius:var(--radius);background:var(--panel);backdrop-filter:blur(2px);box-shadow:var(--shadow);text-align:center}
  /* Dark green logo using mask so color matches nav */
  .logo{width:320px;height:90px;margin:0 auto 10px;background:#0b2b12;-webkit-mask:url('/virtualcoach-logo-transparent.png') center/contain no-repeat;mask:url('/virtualcoach-logo-transparent.png') center/contain no-repeat;}
  h1{margin:6px 0 8px;font-size:22px}
  p.lead{margin:0 0 12px;color:var(--muted)}
  .field{display:flex;gap:8px;align-items:center;margin-top:6px;justify-content:center}
  input{flex:1;min-width:220px;padding:12px 14px;border-radius:10px;border:1px solid var(--line);background:rgba(255,255,255,.10);color:#fff;font-size:16px}
  button{padding:12px 16px;border:none;border-radius:10px;background:rgba(0,255,153,.16);color:#fff;font-weight:700;cursor:pointer;min-width:110px;border:1px solid #0a7}
  button:hover{background:rgba(0,255,153,.22)}
  .err{color:#ffb4b4;min-height:18px;margin-top:10px;font-size:14px}
  footer{width:min(var(--maxw),94%);margin:10px auto 26px;text-align:center;color:#cbd9de;font-size:12px}
</style>
</head>
<body>
  <div id="navMount"></div>
  <script src="/nav.js" defer></script>

  <div class="scrim">
    <main>
      <div class="card">
        <div class="logo" aria-label="Virtual Coach AI"></div>
        <h1>Enter Access Code</h1>
        <p class="lead">Example: <code>Jim1</code> (not case sensitive). Or use <code>?code=ok</code> once.</p>

        <form id="form" onsubmit="return false">
          <div class="field">
            <input id="code" placeholder="Access code (e.g., Jim1, Test2)" />
            <button id="go" type="button">Continue</button>
          </div>
          <div id="err" class="err"></div>
        </form>
      </div>
    </main>
    <footer>© <span id="y"></span> Virtual Coach AI</footer>
  </div>

<script>
(function(){
  document.getElementById('y').textContent = new Date().getFullYear();

  const allow = new Set(['jim1','ben1','tim1','gregory1','corey1','brian1','cindy1','test1','test2','test3']);
  const qp = new URLSearchParams(location.search);

  // Shortcut: https://.../login.html?code=ok
  if (qp.get('code') === 'ok') {
    try{ localStorage.setItem('vc_auth','ok'); }catch{}
    const dest = qp.get('next') === 'upload' ? '/upload.html' : '/index.html';
    location.replace(dest);
    return;
  }

  function success(){
    try{ localStorage.setItem('vc_auth','ok'); }catch{}
    const dest = qp.get('next') === 'upload' ? '/upload.html' : '/index.html';
    location.href = dest;
  }

  function submit(){
    const raw = (document.getElementById('code').value || '').toLowerCase().replace(/\s+/g,'');
    const err = document.getElementById('err');
    if (allow.has(raw)) { err.textContent=''; success(); }
    else { err.textContent='Invalid access code.'; }
  }

  document.getElementById('go').addEventListener('click', submit);
  document.getElementById('code').addEventListener('keydown', e=>{ if(e.key==='Enter') submit(); });
})();
</script>
</body>
</html>
