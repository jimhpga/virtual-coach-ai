<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="robots" content="noindex, nofollow" />
<title>Login â€” Virtual Coach AI</title>
<style>
  :root{
    --fg:#f5f5f5; --bg:#0a0a0a; --line:rgba(255,255,255,0.16); --accent:#1F6F1F;
  }
  /* Use dynamic viewport to avoid iOS keyboard cutoffs */
  html, body {
    margin:0; padding:0; color:var(--fg);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    background: var(--bg) url("homepage-background.png") center/cover no-repeat fixed;
    min-height: 100dvh; /* key: safe on mobile */
  }
  .safe {
    min-height: 100dvh;
    padding: calc(env(safe-area-inset-top) + 24px)
             calc(env(safe-area-inset-right) + 16px)
             calc(env(safe-area-inset-bottom) + 24px)
             calc(env(safe-area-inset-left) + 16px);
    display:flex; align-items:center; justify-content:center;
  }
  .card {
    width:min(520px, 94vw);
    border:1px solid var(--line);
    border-radius:14px;
    background: rgba(0,0,0,0.50);
    box-shadow:0 10px 30px rgba(0,0,0,0.28);
    padding:20px 18px 16px;
    text-align:center;
  }
  h1 { margin:6px 0 10px; font-size:22px; }
  p  { margin:0 0 12px; color:rgba(255,255,255,0.80); }

  .field {
    display:flex; gap:8px; align-items:center; margin-top:6px;
  }
  input[type="password"] {
    flex:1; padding:12px 14px; border-radius:10px;
    border:1px solid var(--line);
    background: rgba(0,0,0,0.35);
    color:#fff; font-size:16px;
  }
  button {
    padding:12px 16px; border:none; border-radius:10px;
    background:var(--accent); color:#fff; font-weight:700; cursor:pointer;
    min-width:110px;
  }
  .err { color:#ffb4b4; min-height:18px; margin-top:10px; font-size:14px; }
  .muted { margin-top:10px; font-size:12px; color:rgba(255,255,255,0.72) }
  .logo {
    width:min(280px, 70vw); height:auto; margin: 0 auto 8px; display:block;
    filter: drop-shadow(0 6px 16px rgba(0,0,0,0.35));
  }
</style>
</head>
<body>
  <div class="safe">
    <div class="card">
      <img src="virtualcoach-logo-transparent.png" alt="Virtual Coach AI" class="logo" />
      <h1>Enter Passcode</h1>
      <p>Tester access only.</p>

      <form id="form" onsubmit="return false">
        <div class="field">
          <input id="pass" type="password" inputmode="numeric" autocomplete="one-time-code"
                 placeholder="Passcode (e.g., 1234)" />
          <button id="go" type="button">Continue</button>
        </div>
        <div id="err" class="err"></div>
      </form>

      <div class="muted">
        Trouble? Email <a href="mailto:jimh@pga.com" style="color:#86efac;text-decoration:none">jimh@pga.com</a>
      </div>
    </div>
  </div>

<script>
(function(){
  // ---- EDIT YOUR PASSCODE HERE ----
  const PASS = "1234";

  // Redirect helper: preserve intent (e.g., resume upload)
  function successRedirect(){
    const next = new URLSearchParams(location.search).get('next') || "";
    const dest = (next === "upload") ? "index.html?resume=upload" : "index.html";
    window.location.href = dest;
  }

  function submit(){
    const code = (document.getElementById('pass').value || "").trim();
    const err  = document.getElementById('err');
    if (code === PASS) {
      try { localStorage.setItem('vc_auth', 'ok'); } catch(e){}
      err.textContent = "";
      successRedirect();
    } else {
      err.textContent = "Invalid passcode. Try again.";
    }
  }

  document.getElementById('go').addEventListener('click', submit);
  document.getElementById('pass').addEventListener('keydown', (e) => {
    if (e.key === 'Enter') submit();
  });

  // Focus input on load (helps on desktop; harmless on mobile)
  window.addEventListener('DOMContentLoaded', () => {
    const el = document.getElementById('pass');
    try { el.focus(); } catch(e){}
  });
})();
</script>
</body>
</html>
