<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Virtual Coach AI — Swing Reports</title>
<meta name="robots" content="noindex, nofollow" />
<style>
  :root{
    --fg:#f5f5f5; --bg:#0a0a0a; --line:rgba(255,255,255,0.16);
    --muted:rgba(255,255,255,0.72);
    --good:#16a34a;  --warn:#eab308;  --bad:#ef4444;
    --accent:#1F6F1F;
  }
  html,body{
    height:100%; margin:0; padding:0; color:var(--fg);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    background: var(--bg) url("homepage-background.png") center / cover no-repeat fixed;
    filter: brightness(1.08) contrast(1.03);
  }
  body{ min-height:-webkit-fill-available; }
  .safe-area{ padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left); }
  .wrap{ max-width: 900px; margin:0 auto; padding:48px 20px; text-shadow:0 1px 2px rgba(0,0,0,0.25); }
  h1{ margin:0 0 6px; font-size:32px; }
  .muted{ color:var(--muted); }

  .acc { margin-top: 10px; }
  details{
    border:1px solid var(--line); border-radius:12px; background:rgba(0,0,0,0.25);
    padding:14px 16px; margin-bottom:10px;
  }
  summary{ cursor:pointer; font-weight:700; list-style:none; outline:none; display:flex; align-items:center; justify-content:space-between; }
  summary::-webkit-details-marker{ display:none; }
  .chev{ width:0; height:0; border-left:6px solid transparent; border-right:6px solid transparent; border-top:8px solid var(--muted); transition: transform .15s; }
  details[open] .chev{ transform: rotate(180deg); }

  .legend{ display:flex; gap:10px; flex-wrap:wrap; margin:8px 0 18px; font-size:13px; }
  .dot{ width:10px; height:10px; border-radius:50%; display:inline-block; margin-right:6px; }
  .g{ background:var(--good); } .y{ background:var(--warn);} .r{ background:var(--bad);}

  .chips{ display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; }
  .chip{ border:1px solid var(--line); border-radius:999px; padding:6px 10px; font-size:13px; }
  .chip.g{ border-color:var(--good); color:#d1fae5; } .chip.y{ border-color:var(--warn); color:#fef08a; } .chip.r{ border-color:var(--bad); color:#fecaca; }

  table{ width:100%; border-collapse: collapse; margin-top:10px; font-size:14px;}
  th, td{ padding:10px; border-bottom:1px solid var(--line); text-align:left; }
  th{ font-weight:700; color:#fff; }
  .pill{ padding:3px 8px; border-radius:999px; font-size:12px; border:1px solid var(--line);}
  .pill.g{ background:rgba(22,163,74,0.2); border-color:var(--good); }
  .pill.y{ background:rgba(234,179,8,0.2); border-color:var(--warn); }
  .pill.r{ background:rgba(239,68,68,0.2); border-color:var(--bad); }

  .cta{
    display:inline-block; margin-top:14px; padding:12px 18px; border-radius:12px;
    background:var(--accent); color:#fff; text-decoration:none; font-weight:700; border:1px solid var(--line);
  }
  .cta:hover{ opacity:.95; }

  /* P1–P9 frames grid (optional if you add images later) */
  .frames {
    display: grid; grid-template-columns: repeat(3, 1fr);
    gap: 10px; margin-top: 10px;
  }
  @media (max-width: 640px) { .frames { grid-template-columns: repeat(2, 1fr); } }
  .frame { border:1px solid var(--line); border-radius:10px; background:rgba(0,0,0,0.25); overflow:hidden; text-align:center; font-size:13px; color:var(--muted); }
  .frame a { display:block; text-decoration:none; color:inherit; }
  .frame img { display:block; width:100%; height:auto; aspect-ratio:16/9; object-fit:cover; }
  .frame figcaption { padding:6px 8px; }
</style>
</head>
<body>
<div class="safe-area">
  <div class="wrap">
    <h1>Swing Reports</h1>
    <div class="muted">ID: <span id="rid">—</span></div>
    <p class="muted" style="margin:6px 0 14px">
      <b>How to use this:</b> Check tempo → scan P1–P9 flags → do the Top-3 drills. Re-upload after 2–3 practice sessions.
    </p>

    <div class="legend">
      <div><span class="dot g"></span>Good</div>
      <div><span class="dot y"></span>Okay</div>
      <div><span class="dot r"></span>Needs Work</div>
    </div>

    <div class="acc">
      <!-- Available Reports -->
      <details open>
        <summary>Available Reports <span class="chev"></span></summary>
        <table>
          <thead><tr><th>Date</th><th>Club</th><th>Tempo</th><th>P1–P9</th><th>Open</th></tr></thead>
          <tbody id="reportRows"></tbody>
        </table>
      </details>

      <!-- Tempo (expanded explanation) -->
      <details open>
        <summary>Tempo <span class="chev"></span></summary>
        <div class="chips"></div>
        <div class="muted" style="margin-top:10px">
          <b>How to read this:</b> Backswing, Pause, Downswing show seconds. Most elite swings cluster near a
          <b>~3:1 total backswing-to-downswing ratio</b>. A tiny pause (0.03–0.08s) helps sequence the change of
          direction. If your ratio is <b>&lt;2.5</b>, you may be rushing from P4→P5; if it’s <b>&gt;3.5</b>,
          you may be stalling at the top.
        </div>
        <ul class="muted" style="margin:8px 0 0 16px">
          <li><b>Backswing:</b> Time from start (P1) to top (P4).</li>
          <li><b>Pause:</b> Micro-pause at P4; too big = loss of speed, zero = yank.</li>
          <li><b>Downswing:</b> P4 to impact (P7). Consistency here = strike control.</li>
        </ul>
        <div class="muted" style="margin-top:8px">
          <b>Coach cue:</b> Keep the backswing smooth, feel a coin-flip pause at the top, then rip the downswing.
        </div>
      </details>

      <!-- P1–P9 (expanded explanation) -->
      <details open>
        <summary>P1–P9 Assessment <span class="chev"></span></summary>
        <div class="muted" style="margin:6px 0 10px">
          <b>What the flags mean:</b>
          <span class="pill g">Good</span> = on model;
          <span class="pill y">Okay</span> = playable but watch it;
          <span class="pill r">Needs Work</span> = leaking speed/consistency.
        </div>
        <table>
          <thead><tr><th>Checkpoint</th><th>What we’re checking</th><th>Status</th></tr></thead>
          <tbody>
            <tr><td>P1 — Setup</td><td>Posture, ball position, grip, pressure in feet.</td><td><span class="pill g">Good</span></td></tr>
            <tr><td>P2 — Shaft Parallel (BS)</td><td>Club outside/inside hands, face orientation.</td><td><span class="pill y">Okay</span></td></tr>
            <tr><td>P3 — Lead Arm Parallel</td><td>Width, trail elbow softness, club across line.</td><td><span class="pill g">Good</span></td></tr>
            <tr><td>P4 — Top</td><td>Hip/torso depth, centered turn, wrist set.</td><td><span class="pill g">Good</span></td></tr>
            <tr><td>P5 — Lead Arm Parallel (DS)</td><td>Shallowing, shaft pitch, chest open vs. ball.</td><td><span class="pill g">Good</span></td></tr>
            <tr><td>P6 — Shaft Parallel (DS)</td><td>Lead wrist flexion, path/face, handle forward.</td><td><span class="pill g">Good</span></td></tr>
            <tr><td>P7 — Impact</td><td>Low-point, shaft lean, face control, open hips.</td><td><span class="pill y">Okay</span></td></tr>
            <tr><td>P8 — Trail Arm Parallel</td><td>Extension to target, face rotation, balance.</td><td><span class="pill g">Good</span></td></tr>
            <tr><td>P9 — Finish</td><td>Full rotation, posted lead leg, stable balance.</td><td><span class="pill g">Good</span></td></tr>
          </tbody>
        </table>
        <div class="muted" style="margin-top:8px">
          <b>Coach cue:</b> Fix reds first (usually P2/P6/P7), protect greens, and re-check tempo after any change.
        </div>

        <!-- Optional image grid (uncomment when you add p1.jpg..p9.jpg)
        <div class="frames">
          <figure class="frame"><a href="p1.jpg" target="_blank" rel="noopener"><img src="p1.jpg" alt="P1 — Setup"><figcaption>P1 — Setup</figcaption></a></figure>
          <figure class="frame"><a href="p2.jpg" target="_blank" rel="noopener"><img src="p2.jpg" alt="P2 — Shaft Parallel (BS)"><figcaption>P2 — Shaft Parallel (BS)</figcaption></a></figure>
          <figure class="frame"><a href="p3.jpg" target="_blank" rel="noopener"><img src="p3.jpg" alt="P3 — Lead Arm Parallel"><figcaption>P3 — Lead Arm Parallel</figcaption></a></figure>
          <figure class="frame"><a href="p4.jpg" target="_blank" rel="noopener"><img src="p4.jpg" alt="P4 — Top"><figcaption>P4 — Top</figcaption></a></figure>
          <figure class="frame"><a href="p5.jpg" target="_blank" rel="noopener"><img src="p5.jpg" alt="P5 — Lead Arm Parallel (DS)"><figcaption>P5 — Lead Arm Parallel (DS)</figcaption></a></figure>
          <figure class="frame"><a href="p6.jpg" target="_blank" rel="noopener"><img src="p6.jpg" alt="P6 — Shaft Parallel (DS)"><figcaption>P6 — Shaft Parallel (DS)</figcaption></a></figure>
          <figure class="frame"><a href="p7.jpg" target="_blank" rel="noopener"><img src="p7.jpg" alt="P7 — Impact"><figcaption>P7 — Impact</figcaption></a></figure>
          <figure class="frame"><a href="p8.jpg" target="_blank" rel="noopener"><img src="p8.jpg" alt="P8 — Trail Arm Parallel"><figcaption>P8 — Trail Arm Parallel</figcaption></a></figure>
          <figure class="frame"><a href="p9.jpg" target="_blank" rel="noopener"><img src="p9.jpg" alt="P9 — Finish"><figcaption>P9 — Finish</figcaption></a></figure>
        </div>
        -->
      </details>

      <!-- Top 3 (expanded explanations) -->
      <details open>
        <summary>Top 3 Things to Work On <span class="chev"></span></summary>
        <p class="muted" style="margin:6px 0 10px">
          Your highest-leverage fixes for contact and curve. Do these first. One change at a time; keep the same feels for a week.
        </p>
        <ol id="top3work"></ol>
        <div class="muted" style="margin-top:8px">
          <b>Coach cue:</b> If a drill cleans up P6 or P7, ball flight improves immediately—don’t chase five swing thoughts.
        </div>
      </details>

      <details>
        <summary>Top 3 Power Things to Work On <span class="chev"></span></summary>
        <p class="muted" style="margin:6px 0 10px">
          Speed without chaos. These add mph by improving sequence and force direction, not just swinging harder.
        </p>
        <ol id="top3power"></ol>
        <div class="muted" style="margin-top:8px">
          <b>Coach cue:</b> Stack speed work after a clean contact session. 15–20 quality reps beat 80 sloppy ones.
        </div>
      </details>

      <!-- Goals (expanded) -->
      <details>
        <summary>Goals <span class="chev"></span></summary>
        <p class="muted" style="margin:6px 0 10px">
          Benchmarks to aim at. Hit these consistently and your dispersion shrinks while ball speed climbs.
        </p>
        <ul>
          <li><b>Tempo:</b> Settle near <b>~3:1</b> with a micro-pause (&lt;0.08s).</li>
          <li><b>P4 depth:</b> Hips turned ~<b>45°</b>, torso ~<b>70–90°</b>, weight still inside trail foot.</li>
          <li><b>P6 face:</b> Within <b>±2°</b> of path; hands slightly ahead of clubhead.</li>
          <li><b>Impact low-point:</b> Iron: <b>+2.0 in</b> ahead of ball; Driver: near 0 with upward AoA.</li>
        </ul>
        <div class="muted" style="margin-top:8px">
          <b>Coach cue:</b> When in doubt, re-check setup and tempo—cheap fixes that move everything else the right way.
        </div>
      </details>

      <!-- Glossary (optional) -->
      <details>
        <summary>Glossary <span class="chev"></span></summary>
        <ul class="muted">
          <li><b>BS/DS:</b> Backswing / Downswing</li>
          <li><b>Shallowing:</b> Shaft pitch flattening from P4→P5</li>
          <li><b>Low-point:</b> Lowest part of the swing arc relative to the ball</li>
          <li><b>Face to path:</b> Difference between clubface angle and swing path</li>
        </ul>
      </details>
    </div>
  </div>
</div>

<script>
  // Read report ID from URL and render live data from sessionStorage
  const id = new URLSearchParams(location.search).get('id') || 'local-demo';
  document.getElementById('rid').textContent = id;

  (function load() {
    const raw = sessionStorage.getItem('vc_report_' + id);
    if (!raw) { console.warn('No cached report. Re-run analysis from Home.'); return; }
    const j = JSON.parse(raw);

    // Tempo chips
    const chips = document.querySelector('.chips');
    if (chips && j.tempo) {
      chips.innerHTML = `
        <span class="chip g">Backswing: ${j.tempo.backswing}s</span>
        <span class="chip g">Pause: ${j.tempo.pause}s</span>
        <span class="chip g">Downswing: ${j.tempo.downswing}s</span>
        <span class="chip g">Ratio: ${j.tempo.ratio}:1</span>
      `;
    }

    // P1–P9 pills (assumes table rows are P1..P9)
    const cells = document.querySelectorAll('tbody tr td:last-child .pill');
    if (j.pFlags && cells.length >= 9) {
      j.pFlags.slice(0,9).forEach((flag, i) => {
        const el = cells[i]; if (!el) return;
        el.classList.remove('g','y','r');
        el.classList.add(flag);
        el.textContent = flag === 'g' ? 'Good' : (flag === 'y' ? 'Okay' : 'Needs Work');
      });
    }

    // Top 3 lists
    const work = document.getElementById('top3work');
    const power = document.getElementById('top3power');
    if (work && j.top3WorkOn) work.innerHTML = j.top3WorkOn.map(x=>`<li><b>${x}</b></li>`).join('');
    if (power && j.top3Power) power.innerHTML = j.top3Power.map(x=>`<li><b>${x}</b></li>`).join('');
  })();

  // Show the current item in "Available Reports"
  const rows = document.getElementById('reportRows');
  if (rows) {
    rows.innerHTML = `
      <tr>
        <td>${new Date().toLocaleDateString()}</td>
        <td>7i</td>
        <td><span class="pill g">3:1</span></td>
        <td><span class="pill g">Good</span></td>
        <td><a class="cta" style="padding:6px 10px; font-size:13px;" href="summary.html?id=${id}">Open</a></td>
      </tr>
    `;
  }
</script>
</body>
</html>
