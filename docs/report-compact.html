<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Virtual Coach AI — Swing Report</title><style>
:root{--bg:#0e1a22;--panel:#16242e;--muted:#8aa5b5;--text:#0e1a22;--accent:#5eb3ff;--ok:#19c37d;--warn:#f6c453;--bad:#ff6b6b;--chip:#f2f7fb;--radius:16px;--shadow:0 8px 24px rgba(0,0,0,.25)}
*{box-sizing:border-box}html,body{height:100%}body{margin:0;color:#0f2330;font:16px/1.45 system-ui,-apple-system,Segoe UI,Inter,Roboto,Helvetica,Arial,sans-serif;background:#e9f4fb}
.bg{position:fixed;inset:0;z-index:-1;background:linear-gradient(0deg,rgba(255,255,255,.50),rgba(255,255,255,.50)),url('homepage-background.png') center/cover no-repeat fixed,url('/golf-course-bg.jpg') center/cover no-repeat fixed,url('/virtualcoach-bg.png') center/cover no-repeat fixed;background-color:#e9f4fb}
.wrap{max-width:1100px;margin:28px auto;padding:0 16px}
header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:16px}
.title{font-size:26px;font-weight:800;letter-spacing:.2px;color:#0c1f2b}.sub{color:#345a72;font-size:13px}
.toolbar{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
.btn,.select{background:#ffffffd9;border:1px solid #d3e3ee;border-radius:12px;color:#0e1a22;padding:8px 12px;box-shadow:var(--shadow);cursor:pointer}
.select{appearance:none;background-image:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#083048\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"6 9 12 15 18 9\"/></svg>');background-repeat:no-repeat;background-position:right 10px center;padding-right:36px}
.badge{background:#fff;border:1px solid #d3e3ee;color:#0e1a22;padding:6px 10px;border-radius:999px;font-size:12px}
.card,details.panel{background:#ffffffe6;border:1px solid #d3e3ee;border-radius:var(--radius);box-shadow:var(--shadow)}
.card h3{margin:0;padding:14px 16px;border-bottom:1px solid #e0edf5;color:#0c1f2b}.card .content{padding:12px 16px}
summary{list-style:none;display:flex;gap:10px;align-items:center;padding:14px 16px;cursor:pointer}summary::-webkit-details-marker{display:none}
.pnum{width:34px;height:34px;border-radius:10px;background:#eef6fb;border:1px solid #d3e3ee;display:grid;place-items:center;font-weight:800;color:#0c1f2b}
.pname{font-weight:700;color:#0c1f2b}.caret{margin-left:auto;transition:transform .2s ease}details[open] .caret{transform:rotate(180deg)}
.gchip{font-size:12px;font-weight:700;padding:3px 8px;border-radius:8px;border:1px solid #d3e3ee;background:#fff}.g-good{color:#0a8c5b}.g-ok{color:#a97800}.g-bad{color:#c73838}
.metric{display:flex;align-items:center;gap:10px;margin:9px 0}.metric .name{flex:0 0 230px;color:#0f2b3a}
.bar{flex:1;height:10px;border-radius:999px;background:#e8f2f9;border:1px solid #d3e3ee;position:relative;overflow:hidden}.bar>span{position:absolute;left:0;top:0;bottom:0;border-radius:999px}
.ok{background:linear-gradient(90deg,#19c37d,#2bd897)}.warn{background:linear-gradient(90deg,#f6c453,#ffd479)}.bad{background:linear-gradient(90deg,#ff6b6b,#ff8f8f)}.pct{width:52px;text-align:right;color:#0c2433}
.grid{display:grid;grid-template-columns:1fr;gap:14px}@media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}
.busy{position:fixed;top:12px;right:12px;background:#ffffff;border:1px solid #d3e3ee;border-radius:999px;padding:8px 12px;display:flex;gap:8px;align-items:center;box-shadow:var(--shadow);z-index:10000}
.busy[hidden]{display:none!important}.spinner{width:18px;height:18px;border:3px solid #e0edf5;border-top-color:#5eb3ff;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}
</style></head><body data-report-src="reports/demo/report.json"><div class="bg" aria-hidden="true"></div>
<div id="busy" class="busy" hidden><span class="spinner" aria-hidden="true"></span><span id="busyText">Processing…</span></div>
<div class="wrap"><header><div><div class="title">Swing Report — P1–P9</div><div class="sub">Date: <span id="date"></span> • Mode: <span id="modeLabel">Full Swing</span></div></div>
<div class="toolbar"><label class="badge">Swings: <span id="swingCount">1</span></label>
<select id="discipline" class="select" title="Shot type"><option value="full-swing" selected>Full Swing</option><option value="chipping">Chipping</option><option value="putting">Putting</option></select>
<select id="focus" class="select" title="Focus filter"><option value="all" selected>Focus: All</option><optgroup label="Upper Body"><option value="right-wrist">Right Wrist</option><option value="left-wrist">Left Wrist</option><option value="arm-bend">Arm Bend</option><option value="hand-path">Hand Path</option><option value="shoulder-turn">Shoulder Turn</option></optgroup><optgroup label="Lower Body"><option value="hip-movement">Hip Movement</option><option value="knee-movement">Knee Movement</option><option value="foot-movement">Foot / Pressure</option><option value="lead-leg-brake">Lead Leg Braking</option></optgroup><optgroup label="Club"><option value="club-path">Club Path</option><option value="face-angle">Club Face Angle</option><option value="tempo">Timing & Tempo</option></optgroup></select>
<button id="expandAll" class="btn" type="button">Expand All</button><button id="collapseAll" class="btn" type="button">Collapse All</button><button id="reload" class="btn" type="button">Reload Report</button><button id="sample" class="btn" type="button">Load Sample</button></div></header>
<section id="plistWrap"><div class="sub">Click a P-section to expand. Use the Focus filter to dim everything except what you care about.</div><div id="plist"></div></section>
<section class="card" style="margin-top:12px"><h3>Coaching Card</h3><div class="content">
<details class="panel" open><summary><span class="pname">Top 3 Priority Fixes</span><svg class="caret" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg></summary><div id="coachPriority"></div></details>
<details class="panel" style="margin-top:10px"><summary><span class="pname">Top 3 Power Fixes</span><svg class="caret" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg></summary><div id="coachPower"></div></details>
</div></section>
<section class="card" style="margin-top:12px"><h3>14‑Day Practice Plan</h3><div id="practice" class="content"></div></section>
<!-- CHARTS AT BOTTOM -->
<section class="grid" style="margin-top:12px"><div class="card"><h3>Position Consistency</h3><div id="position" class="content"></div></div><div class="card"><h3>Swing Consistency</h3><div id="swing" class="content"></div></div></section>
<section class="card" style="margin-top:12px"><h3>Power Score Summary</h3><div id="power" class="content"></div></section>
<div id="status" class="sub" style="margin-top:8px"></div><div id="error" class="sub" style="color:#b42323"></div>
<details id="debug" class="sub" style="margin-top:6px"><summary>Debug</summary><pre id="debugOut" style="white-space:pre-wrap;background:#f3f9fd;border:1px solid #d3e3ee;padding:8px;border-radius:8px;max-height:260px;overflow:auto"></pre></details>
</div>
<script>
const $=s=>document.querySelector(s),$$=s=>document.querySelectorAll(s);const busy=$('#busy');const setBusy=(on,text)=>{try{busy.hidden=!on;if(text)$('#busyText').textContent=text}catch(_){}};$('#date').textContent=new Date().toLocaleDateString();
// keep gradient when swapping bg image
(function(){try{const bg=$('.bg'),c=['/homepage-background.png','/golf-course-bg.jpg','/virtualcoach-bg.png'];function pick(i){if(!bg||i>=c.length)return;const raw=c[i],img=new Image();img.onload=()=>{bg.style.backgroundImage=`linear-gradient(0deg,rgba(255,255,255,.50),rgba(255,255,255,.50)),url('${raw}')`};img.onerror=()=>pick(i+1);img.src=raw+'?v='+Date.now()}const cur=getComputedStyle(bg).backgroundImage;if(!cur||cur==='none')pick(0)}catch(_){}})();
const fmt=v=>`${v}%`,band=v=>v>=75?'ok':v>=55?'warn':'bad',metricRow=m=>`<div class="metric" data-tags="${(m.tags||[]).join(' ')}"><div class="name">${m.label}</div><div class="bar"><span class="${band(m.value)}" style="width:${m.value}%"></span></div><div class="pct">${fmt(m.value)}</div></div>`,posRow=p=>`<div class="metric"><div class="name">${p.p}</div><div class="bar"><span class="${band(p.value)}" style="width:${p.value}%"></span></div><div class="pct">${fmt(p.value)}</div></div>`;
const defaults={P1:'Athletic setup with neutral grip, soft knees, neutral pelvis tilt. 55/45 pressure, ball position fits club.',P2:'Shaft parallel; width maintained; hands in front of chest; gradual wrist set; face near toe-up.',P3:'Lead arm parallel; full torso turn; trail elbow in front of ribcage; maintain width.',P4:'Top: pressure into trail heel; trail hip deep; lead wrist closer to flat/bowed; head steady.',P5:'Transition: pelvis leads, then torso, then arms; shaft shallows; pressure to lead mid-foot.',P6:'Delivery: shaft parallel; hands slightly ahead; face in path window; pelvis keeps turning.',P7:'Impact: forward shaft lean; low point forward; pelvis/chest open; lead leg braced.',P8:'Post-impact: trail arm extends; handle around; no flip; balanced rotation.',P9:'Finish: fully on lead side; belt buckle/chest to target; hold the pose.'};
function renderReport(d){if(d.discipline)$('#modeLabel').textContent=/putt/i.test(d.discipline)?'Putting':/chip/i.test(d.discipline)?'Chipping':'Full Swing';if(d.swings!=null)$('#swingCount').textContent=String(d.swings);
$('#swing').innerHTML=(d.swing_metrics||[]).map(metricRow).join('')||'<div class="sub">No swing metrics.</div>';$('#position').innerHTML=(d.position_metrics||[]).map(posRow).join('')||'<div class="sub">No position metrics.</div>';
const p=d.power||{score:0,tempo:'—',release_timing:0};$('#power').innerHTML=`<div class="metric"><div class="name">Power Score</div><div class="bar"><span class="${band(p.score)}" style="width:${p.score}%"></span></div><div class="pct">${fmt(p.score)}</div></div><div class="metric"><div class="name">Tempo</div><div class="bar"><span class="ok" style="width:76%"></span></div><div class="pct">${p.tempo}</div></div><div class="metric"><div class="name">Release Timing</div><div class="bar"><span class="${band(+p.release_timing)}" style="width:${+p.release_timing||0}%"></span></div><div class="pct">${+p.release_timing||0}%</div></div>`;
let phases=Array.isArray(d.phases)?d.phases.slice():[];if(!phases.length){const names=['Setup','Shaft Parallel (Backswing)','Lead Arm Parallel (Backswing)','Top of Swing','Lead Arm Parallel (Downswing)','Shaft Parallel (Downswing)','Impact','Trail Arm Parallel (Follow-Through)','Finish'],pm=d.position_metrics||[];for(let i=0;i<9;i++){const pid='P'+(i+1),m=pm.find(x=>String(x.p).toUpperCase()===pid)||{value:0},g=m.value>=75?'good':m.value>=55?'ok':'bad';phases.push({id:pid,name:names[i],short:'',long:'',grade:g})}}
$('#plist').innerHTML=phases.map((ph,i)=>`<details ${i===0?'open':''} class="panel"><summary><span class="pnum">${ph.id||('P'+(i+1))}</span><span class="pname">${ph.name||''}</span><span class="gchip g-${(ph.grade||'ok')}" style="margin-left:8px">${String(ph.grade||'OK').toUpperCase()}</span><span class="sub" style="margin-left:8px">${ph.short||''}</span><svg class="caret" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg></summary><div class="content"><div class="sub" style="margin-bottom:8px">${ph.short||''}</div><div style="margin-bottom:10px">${(ph.long&&ph.long.trim()&&ph.long.trim()!==(ph.short||'').trim())?ph.long:(defaults[ph.id||('P'+(i+1))]||'')}</div><button class="btn view-video" data-url="${ph.video||ph.video_url||''}">View Video</button></div></details>`).join('');
const pri=(d.coaching&&Array.isArray(d.coaching.priority_fixes))?d.coaching.priority_fixes:[{title:'Clubface control at P7',short:'Match face to path.',long:'Face drifting open at P6→P7. Neutral grip + lead-wrist flexion from P5→P6. Half-swings x8 keeping logo at target.'},{title:'Lower body sequence',short:'Clear hips first.',long:'Hands fire early. Feel lead hip clear as pressure shifts to lead heel from P4. Step-through drill.'},{title:'Hand path width',short:'Don’t collapse.',long:'At P3 width narrows. Pump-downs: P3 → mini P4 → P5 with wide feel.'}];
const pow=(d.coaching&&Array.isArray(d.coaching.power_fixes))?d.coaching.power_fixes:[{title:'Tempo 3:1',short:'Smooth it out.',long:'Backswing too quick. Count 1-2-3 back, 1 through. Metronome 72 bpm.'},{title:'Lead-leg brake',short:'Post up.',long:'Plant lead heel from P4; straighten through P5–P6. Towel under lead heel.'},{title:'Late release timing',short:'Speed at P7–P8.',long:'Hold angles to P6, then unhinge. Two-tee gate at ball.'}];
const mk=i=>`<details class="panel"><summary><span class="pname">${i.title}</span><span class="sub" style="margin-left:8px">${i.short||''}</span><svg class="caret" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg></summary><div class="content">${i.long||''}</div></details>`;$('#coachPriority').innerHTML=pri.map(mk).join('');$('#coachPower').innerHTML=pow.map(mk).join('');
const plan=(d.practice_plan&&Array.isArray(d.practice_plan))?d.practice_plan:Array.from({length:14},(_,i)=>({day:i+1,title:(i%2?'Contact + Face':'Tempo + Sequence'),drills:['9-to-3 × 15 (clip P6→P8).','Step-through × 10 (lead-leg brake).','Gate drill × 15.']}));$('#practice').innerHTML=plan.map(d=>`<details class="panel" ${d.day===1?'open':''}><summary><span class="pname">Day ${d.day}</span><span class="sub" style="margin-left:8px">${d.title||''}</span><svg class="caret" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg></summary><div class="content">${(d.drills||[]).map(x=>`<div>• ${x}</div>`).join('')||'<div class="sub">No drills provided.</div>'}</div></details>`).join('');
}
function sanitize(t){return (t||'').replace(/^﻿/,'').replace(/[​-‏‪-‮]/g,'').replace(/^[^\[{]*/,'').replace(/[^\]}]*$/,'').replace(/[\u0000-\u001F\u007F-\u009F]/g,'').trim()}
async function loadReport(url){const s=$('#status'),e=$('#error');e.textContent='';s.innerHTML='Loading <a href="'+url+'" target="_blank" rel="noopener">'+url+'</a>…';let raw='';try{const res=await fetch(url,{cache:'no-store'});if(!res.ok)throw new Error('HTTP '+res.status);raw=await res.text();const cleaned=sanitize(raw);let data;try{data=JSON.parse(cleaned)}catch(parseErr){const a=cleaned.indexOf('{'),b=cleaned.lastIndexOf('}');if(a>-1&&b>a)data=JSON.parse(cleaned.slice(a,b+1));else throw parseErr}renderReport(data);s.innerHTML='Loaded: <a href="'+url+'" target="_blank" rel="noopener">'+url+'</a>'}catch(err){e.textContent='Failed to load report: '+(err&&err.message?err.message:String(err));const dbg=$('#debugOut');if(dbg){try{dbg.textContent='Raw first 240:\n'+(raw||'').slice(0,240)+'\n\nCleaned first 240:\n'+sanitize(raw||'').slice(0,240)}catch(_){}}renderReport(sample);try{$('#debug').open=true}catch(_){ }s.textContent='Loaded SAMPLE (parse failed): '+url}}
const sample={swings:1,discipline:'full-swing',power:{score:78,tempo:'3.0:1',release_timing:62},swing_metrics:[{label:'Right Arm Angle',value:84,tags:['arm-bend']},{label:'Club Face Angle',value:79,tags:['face-angle']},{label:'Shoulder Turn',value:72,tags:['shoulder-turn']},{label:'Hip Turn',value:68,tags:['hip-movement']},{label:'X-Factor (Shoulder–Hip)',value:64,tags:['sequence']},{label:'Club Path',value:71,tags:['club-path']},{label:'Face-to-Path',value:66,tags:['face-angle']},{label:'Attack Angle',value:62,tags:['delivery']}],position_metrics:[{p:'P1',value:90},{p:'P2',value:74},{p:'P3',value:61},{p:'P4',value:55},{p:'P5',value:63},{p:'P6',value:70},{p:'P7',value:81},{p:'P8',value:86},{p:'P9',value:78}],phases:[{id:'P1',name:'Setup',short:'Athletic stance, posture aligned',long:'',grade:'good'},{id:'P2',name:'Shaft Parallel (Backswing)',short:'Club parallel, early width',long:'',grade:'ok'},{id:'P3',name:'Lead Arm Parallel (Backswing)',short:'Good extension, slight flat',long:'',grade:'ok'},{id:'P4',name:'Top of Swing',short:'Full coil',long:'',grade:'bad'},{id:'P5',name:'Lead Arm Parallel (Downswing)',short:'Arm drops inside',long:'',grade:'good'},{id:'P6',name:'Shaft Parallel (Downswing)',short:'Shallowing, trail elbow leads',long:'',grade:'good'},{id:'P7',name:'Impact',short:'Hips open, shaft lean',long:'',grade:'ok'},{id:'P8',name:'Trail Arm Parallel (Follow-Through)',short:'Balanced extension',long:'',grade:'good'},{id:'P9',name:'Finish',short:'Upright, balanced',long:'',grade:'good'}]};
function bindUI(){const getPath=()=>new URLSearchParams(location.search).get('report')||document.body.dataset.reportSrc||'/reports/demo/report.json';['reload'].forEach(id=>{const el=document.getElementById(id);if(el)el.addEventListener('click',()=>loadReport(getPath()))});const sampleBtn=document.getElementById('sample');if(sampleBtn)sampleBtn.addEventListener('click',()=>{renderReport(sample);document.getElementById('status').textContent='Loaded sample (no fetch).'});const expAllBtn=document.getElementById('expandAll');if(expAllBtn)expAllBtn.addEventListener('click',()=>{$$('details.panel').forEach(d=>d.open=true)});const colAllBtn=document.getElementById('collapseAll');if(colAllBtn)colAllBtn.addEventListener('click',()=>{$$('details.panel').forEach(d=>d.open=false)})}
bindUI();document.addEventListener('DOMContentLoaded',bindUI);
document.getElementById('plist').addEventListener('click',e=>{const btn=e.target.closest('.view-video');if(!btn)return;const url=btn.getAttribute('data-url');const mount=document.getElementById('videoMount');if(mount){mount.innerHTML='';if(url){const v=document.createElement('video');v.controls=true;v.playsInline=true;v.style.width='100%';v.src=url;mount.appendChild(v)}else{mount.textContent='No video for this phase.'}const ov=document.getElementById('videoOverlay');if(ov)ov.hidden=false}});
const auto=new URLSearchParams(location.search).get('report')||document.body.dataset.reportSrc||'/reports/demo/report.json';if(auto)loadReport(auto);
</script><footer>© <span id="y"></span> Virtual Coach AI</footer>
<script id="vc-nav-js">
document.addEventListener('DOMContentLoaded', ()=>{
  const header=document.getElementById('site-header');
  const btn=document.getElementById('menuBtn');
  const nav=document.getElementById('siteNav');
  if(btn&&nav&&header){
    btn.addEventListener('click', ()=>{
      const open=header.classList.toggle('open');
      btn.setAttribute('aria-expanded', open?'true':'false');
    });
    nav.addEventListener('click', e=>{
      if(e.target&&e.target.tagName==='A'){ header.classList.remove('open'); btn.setAttribute('aria-expanded','false'); }
    });
  }
  const here=(location.pathname.split('/').pop()||'index.html').split('?')[0].toLowerCase();
  document.querySelectorAll('nav a').forEach(a=>{
    const h=(a.getAttribute('href')||'').split('?')[0].toLowerCase();
    if(h===here) a.setAttribute('aria-current','page');
  });
  const y=document.getElementById('y'); if(y) y.textContent=new Date().getFullYear();
});
</script>
</body></html>







