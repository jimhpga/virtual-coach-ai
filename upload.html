<body>
  <div id="navMount"></div>
  <script src="/nav.js" defer></script>

  <!-- your existing page content starts here -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Virtual Coach AI — Upload</title>
<link rel="preload" as="image" href="/homepage-background.png" />
<style>
  :root{
    --nav: rgba(7,68,32,.96);
    --scrim: rgba(0,0,0,.05);
    --panel: rgba(0,0,0,.30);
    --line: rgba(255,255,255,.12);
    --text:#f2f7f9; --muted:#cfe0e6;
    --maxw: 980px; --radius:14px; --shadow:0 10px 24px rgba(0,0,0,.22);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--text);
    font:16px/1.5 system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial,sans-serif;
    background:url('/homepage-background.png') center/cover fixed no-repeat;
  }
  .scrim{min-height:100vh;background:var(--scrim)}

  /* NAV (same as Home/Login) */
  header{position:sticky;top:0;z-index:20;background:var(--nav);border-bottom:1px solid rgba(255,255,255,.1)}
  .navwrap{width:min(var(--maxw),94%);margin:0 auto;padding:10px 0;display:flex;gap:16px;align-items:center;justify-content:space-between}
  .brand{display:flex;align-items:center;gap:10px;color:#fff;text-decoration:none;font-weight:800;letter-spacing:.2px}
  .brand img{height:30px;width:auto;display:block}
  nav a{color:#fff;text-decoration:none;padding:8px 10px;border-radius:10px;border:1px solid transparent}
  nav a:hover{background:rgba(255,255,255,.08)}
  nav a[aria-current="page"]{border-color:rgba(255,255,255,.18);background:rgba(255,255,255,.10)}

  /* Main */
  main{width:min(var(--maxw),94%);margin:0 auto;padding:18px 0 40px;display:grid;gap:16px}
  .card{padding:14px;border:1px solid var(--line);border-radius:var(--radius);background:var(--panel);backdrop-filter:blur(2px);box-shadow:var(--shadow)}
  h1{margin:0 0 6px}
  .muted{color:var(--muted)}
  .grid{display:grid;gap:14px}
  @media(min-width:900px){ .grid{grid-template-columns:1.1fr .9fr} }

  .field{display:grid;gap:8px;margin-top:8px}
  input[type="file"], select{
    padding:10px; border-radius:10px; border:1px solid var(--line);
    background:rgba(255,255,255,.10); color:#fff
  }
  .btn{
    border:1px solid var(--line); background:rgba(0,255,153,.16);
    color:#fff; padding:10px 14px; border-radius:12px; text-decoration:none; font-weight:600;
    cursor:pointer; display:inline-flex; align-items:center; gap:8px;
  }
  .btn:hover{background:rgba(0,255,153,.22)}
  .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}

  video{width:100%; border-radius:12px; border:1px solid var(--line); background:#000}
  .status{font-size:14px;color:#cfe0e6;min-height:20px}
  footer{width:min(var(--maxw),94%);margin:10px auto 26px;text-align:center;color:#cbd9de;font-size:12px}

  /* Green masked logo (optional header visual) */
  .logo{
    width:min(240px,60vw); aspect-ratio: 1000 / 280; height:auto; margin:0 0 10px 0;
    background:#00ff99;
    -webkit-mask:url('/virtualcoach-logo-transparent.png') center/contain no-repeat;
            mask:url('/virtualcoach-logo-transparent.png') center/contain no-repeat;
  }
</style>
</head>
<body>
  <!-- NAV -->
  <header>
    <div class="navwrap">
      <a class="brand" href="/"><img src="/virtualcoach-logo-transparent.png" alt="Virtual Coach AI"><span>Virtual Coach AI</span></a>
      <nav aria-label="Primary">
        <a href="/index.html">Home</a>
        <a href="/report.html?report=/report.json">Reports</a>
        <a href="/coming-soon.html">Coming&nbsp;Soon</a>
        <a href="/pricing.html">Pricing</a>
        <a href="/faq.html">FAQ</a>
        <a href="/contact.html">Contact</a>
        <a href="/login.html">Login</a>
      </nav>
    </div>
  </header>

  <div class="scrim">
    <main>
      <section class="card">
        <div class="logo" role="img" aria-label="Virtual Coach AI"></div>
        <h1>Upload Your Swing</h1>
        <div class="muted">Pick a face-on or down-the-line clip. We’ll generate a report you can view and share.</div>
      </section>

      <section class="grid">
        <!-- Left: inputs + actions -->
        <div class="card">
          <h2 style="margin:0 0 8px">Step 1 — Select video</h2>
          <div class="field">
            <label for="file">Choose a video file (mp4, mov, webm)</label>
            <input id="file" type="file" accept="video/*" />
          </div>

          <div class="field">
            <label for="discipline">Discipline (optional)</label>
            <select id="discipline">
              <option value="full-swing" selected>Full Swing</option>
              <option value="chipping">Chipping</option>
              <option value="putting">Putting</option>
            </select>
          </div>

          <div class="row">
            <button id="makeReport" class="btn">Create Report</button>
            <span id="status" class="status"></span>
          </div>
        </div>

        <!-- Right: preview -->
        <div class="card">
          <h2 style="margin:0 0 8px">Preview</h2>
          <video id="preview" controls playsinline></video>
        </div>
      </section>
    </main>

    <footer>© <span id="y"></span> Virtual Coach AI. All rights reserved.</footer>
  </div>

<script>
document.getElementById('y').textContent = new Date().getFullYear();

const fileInput = document.getElementById('file');
const videoEl   = document.getElementById('preview');
const statusEl  = document.getElementById('status');
let blobUrl = '';

fileInput.addEventListener('change', () => {
  try {
    if (!fileInput.files || !fileInput.files.length) return;
    const f = fileInput.files[0];
    if (!/^video\//.test(f.type)) {
      statusEl.textContent = 'Please choose a video file.';
      return;
    }
    if (blobUrl) URL.revokeObjectURL(blobUrl);
    blobUrl = URL.createObjectURL(f);
    videoEl.src = blobUrl;
    videoEl.load();
    statusEl.textContent = 'Video ready.';
  } catch (e) {
    console.error(e);
    statusEl.textContent = 'Could not load video.';
  }
});

document.getElementById('makeReport').addEventListener('click', async () => {
  statusEl.textContent = '';
  if (!blobUrl) {
    statusEl.textContent = 'Select a video first.';
    fileInput.focus();
    return;
  }

  // Minimal “fake analyzer”: build a usable report object.
  const discipline = document.getElementById('discipline').value || 'full-swing';

  // Helper: simple YouTube search link for each phase name
  const yt = (q) => `https://www.youtube.com/results?search_query=${encodeURIComponent(q)}`;

  const report = {
    swings: 1,
    discipline,
    power: { score: 78, tempo: "3.0:1", release_timing: 64 },

    // NOTE: We store BOTH: a YouTube search link in `ref` (so the report shows a YouTube button),
    // and your local video in `video` (held in case you later want to show the actual clip).
    phases: [
      { id:"P1", name:"Address",        grade:"ok",         short:"Setup looks serviceable.",                 long:"Neutral grip and posture. Tiny tweak: soften trail elbow and feel pressure mid-feet.", ref: yt("P1 Address golf checkpoint"),        video: blobUrl },
      { id:"P2", name:"Takeaway",       grade:"good",       short:"Club outside hands, face stable.",         long:"Great start. Keep the triangle; feel chest move the club, not the wrists.",             ref: yt("P2 Takeaway golf checkpoint"),       video: blobUrl },
      { id:"P3", name:"Lead Arm Parallel", grade:"ok",      short:"Slight inside path.",                      long:"Match shaft to trail forearm. Cue: “butt of club to belt buckle.”",                    ref: yt("P3 lead arm parallel golf checkpoint"), video: blobUrl },
      { id:"P4", name:"Top",            grade:"needs help", short:"Across-the-line, bit long.",               long:"Shorten 1–2 inches; feel trail elbow more down. Quiet the wrists at the top.",        ref: yt("P4 top of backswing checkpoint"),    video: blobUrl },
      { id:"P5", name:"Early Downswing",grade:"ok",         short:"Sequencing okay; room to shallow.",        long:"Bump hips, keep back to target micro-beat longer. Cue: “hips start, hands soft.”",     ref: yt("P5 transition shallow golf"),        video: blobUrl },
      { id:"P6", name:"Shaft Parallel", grade:"needs help", short:"Shaft steep; face open.",                  long:"Feel trail elbow in front, knuckles down. Alignment stick drill for shallowing.",      ref: yt("P6 shaft parallel delivery golf"),   video: blobUrl },
      { id:"P7", name:"Impact",         grade:"ok",         short:"Handle forward, face slightly open.",      long:"More forward shaft lean with body rotation. Impact bag: turn+lean together.",          ref: yt("P7 impact golf checkpoint"),         video: blobUrl },
      { id:"P8", name:"Post-Impact",    grade:"good",       short:"On plane through; balanced.",              long:"Nice extension. Keep chest and belt turning left—no stall.",                           ref: yt("P8 post impact golf"),               video: blobUrl },
      { id:"P9", name:"Finish",         grade:"good",       short:"Stable, stacked over lead side.",          long:"Hold full finish for 3 sec. Photo finish drill to lock balance.",                      ref: yt("P9 finish golf checkpoint"),         video: blobUrl },
    ],

    coaching: {
      priority_fixes: [
        { title:"Shorten & Set the Top (P4)", short:"Trim backswing; trail elbow down.", long:"Think ‘stop at 10:30’. Feel right elbow down and in, wrist set earlier so the club can shallow later.", ref: yt("shorten backswing drill") },
        { title:"Shallow Then Turn (P5–P6)",  short:"Trail elbow forward; face square.", long:"Alignment-stick across hips: bump then turn. “Knuckles down” to match face to path.", ref: yt("shallow the club drill") },
        { title:"Rotate Through Impact (P7)", short:"More body turn with lean.",          long:"Impact bag + turn: press handle ahead while chest keeps moving—no stall and flip.", ref: yt("impact bag drill rotation") }
      ],
      power_fixes: [
        { title:"Tempo 3:1",                  short:"Smooth back, athletic through.",     long:"Count 1-2-3 to the top, then POP on 1. Keep grip pressure steady; speed from ground up.", ref: yt("golf tempo 3 to 1 drill") },
        { title:"Ground Push",                short:"Pressure left earlier.",             long:"Step-change drill: tiny step to lead foot to feel pressure shift before the hit.",        ref: yt("pressure shift drill golf") },
        { title:"Release Timing",             short:"Unhinge with turn, not hands only.", long:"Pump-pump-go drill: two mini rehearsals then a full swing keeping hands soft, body leads.", ref: yt("release timing golf drill") }
      ]
    },

    position_metrics: [
      {label:"Clubface @ P6", value:58},
      {label:"Hand Path @ P3", value:64},
      {label:"Spine Angle @ P1", value:72},
      {label:"Head Movement", value:61}
    ],
    swing_metrics: [
      {label:"Tempo", value:76},
      {label:"Face-to-Path", value:60},
      {label:"Pressure Shift", value:68},
      {label:"Release Timing", value:64}
    ]
  };

  try {
    sessionStorage.setItem('vc_report', JSON.stringify(report));
  } catch(e){
    console.error(e);
    statusEl.textContent = 'Could not save report in this browser.';
    return;
  }

  // Small “processing” pause so it feels responsive
  statusEl.textContent = 'Processing…';
  setTimeout(() => {
    window.location.href = '/report.html?src=session';
  }, 400);
});
</script>
</body>
</html>
