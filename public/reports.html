<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Virtual Coach AI — Report</title>
  <style>
    :root{
      --bg1:#050a14; --bg2:#0b1b3a; --card: rgba(255,255,255,.06);
      --stroke: rgba(255,255,255,.10); --text:#e9f1ff; --muted:#9fb2d8;
      --good:#2ee59d; --warn:#ffcc66;
    }
    html,body{height:100%}
    body{
      margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 600px at 50% 10%, #12306a 0%, transparent 60%),
                  radial-gradient(1000px 600px at 50% 90%, #0b1b3a 0%, transparent 60%),
                  linear-gradient(180deg, var(--bg1), var(--bg2));
    }
    .nav{
      position:sticky; top:0; z-index:10;
      display:flex; align-items:center; gap:18px;
      padding:14px 22px;
      background: rgba(0,0,0,.35);
      backdrop-filter: blur(10px);
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .brand{font-weight:800; letter-spacing:.2px}
    .nav a{color:var(--muted); text-decoration:none; font-weight:600; font-size:14px}
    .nav a:hover{color:var(--text)}
    .wrap{max-width:1020px; margin:0 auto; padding:28px 18px 60px}
    h1{margin:14px 0 6px; font-size:40px}
    .sub{color:var(--muted); margin-bottom:18px}
    .card{
      background: var(--card);
      border:1px solid var(--stroke);
      border-radius:16px;
      padding:16px;
      box-shadow: 0 20px 60px rgba(0,0,0,.35);
    }
    .grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:14px;
    }
    @media (max-width: 900px){
      .grid{grid-template-columns:1fr}
    }
    .row{display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap}
    .pill{
      padding:6px 10px; border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      color: var(--muted);
      font-size:13px; font-weight:700;
    }
    .status{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
    .btn{
      appearance:none; border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.18);
      color: var(--text);
      padding:10px 12px; border-radius:12px;
      font-weight:800; cursor:pointer;
    }
    .btn:hover{border-color: rgba(255,255,255,.30)}
    video{
      width:100%;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:#000;
    }
    .pgrid{
      margin-top:14px;
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap:10px;
    }
    .p-card{
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.10);
      border-radius:12px;
      padding:10px;
    }
    .p-label{font-weight:900; letter-spacing:.5px; color:#cfe0ff; font-size:13px; margin-bottom:6px}
    .p-card img{
      width:100%;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.08);
      display:block;
    }
    .small{color:var(--muted); font-size:13px}
    .kpi{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin-top:10px;
    }
    .kpi .box{
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.10);
      border-radius:12px;
      padding:12px;
    }
    .kpi .num{font-size:22px; font-weight:900}
    .kpi .lbl{color:var(--muted); font-weight:700; font-size:12px; letter-spacing:.3px}
    footer{margin-top:26px; color:rgba(255,255,255,.35); text-align:center; font-size:12px}
  </style>
</head>
<body>
  <div class="nav">
    <div class="brand">Virtual Coach AI</div>
    <a href="/index.html">Home</a>
    <a href="/upload.html">Upload</a>
    <a href="/reports.html">Reports</a>
    <a href="/pricing.html">Pricing</a>
    <a href="/faq.html">FAQ</a>
    <a href="/contact.html">Contact</a>
  </div>

  <div class="wrap">
    <h1>Swing Report</h1>
    <div class="sub">This is the MVP report page: video + tour-tempo P1–P9 strip now; AI diagnosis cards next.</div>

    <div class="card">
      <div class="row">
        <div class="status">
          <span class="pill" id="jobPill">jobId: —</span>
          <span class="pill" id="videoPill">video: —</span>
        </div>
        <div class="status">
          <button class="btn" id="backBtn">← Back to Upload</button>
          <button class="btn" id="openVideoBtn">Open Video</button>
        </div>
      </div>

      <div class="grid" style="margin-top:14px">
        <div>
          <video id="vid" controls playsinline></video>
          <div class="small" id="note" style="margin-top:8px">Tip: click any P frame to open full-size.</div>
          <div class="pgrid" id="pGrid"></div>
        </div>

        <div>
          <div class="card" style="padding:14px; margin-bottom:12px">
            <div style="font-weight:900; font-size:16px; margin-bottom:6px">Tempo Snapshot</div>
            <div class="small">We’re anchoring frames to impact and mapping P1–P9 using tour tempo (backswing ~70%, downswing ~30%).</div>
            <div class="kpi">
              <div class="box">
                <div class="lbl">Swing Window</div>
                <div class="num" id="winTxt">—</div>
              </div>
              <div class="box">
                <div class="lbl">Impact (sec)</div>
                <div class="num" id="impTxt">—</div>
              </div>
            </div>
          </div>

          <div class="card" style="padding:14px; margin-bottom:12px">
            <div style="font-weight:900; font-size:16px; margin-bottom:6px">Fixer Report (coming next)</div>
            <div class="small">Top 2–3 faults + 1–2 drills each. Plain text + YouTube modal.</div>
          </div>

          <div class="card" style="padding:14px; margin-bottom:12px">
            <div style="font-weight:900; font-size:16px; margin-bottom:6px">Power Report (coming next)</div>
            <div class="small">Tempo, sequence estimates, lead-leg braking cues, closure rate placeholder.</div>
          </div>

          <div class="card" style="padding:14px">
            <div style="font-weight:900; font-size:16px; margin-bottom:6px">Efficiency Report (coming next)</div>
            <div class="small">Strike/face/path heuristics, low-hanging fixes, confidence labels.</div>
          </div>
        </div>
      </div>
    </div>

    <footer>© 2025 Virtual Coach AI. All rights reserved.</footer>
  </div>

  <script>
    const qs = new URLSearchParams(location.search);
    const jobId = qs.get("jobId") || "";
    const videoUrl = qs.get("videoUrl") || "";
    const impact = qs.get("impactSec") || ""; // optional, if you pass it later
    const winStart = qs.get("start") || "";
    const winEnd = qs.get("end") || "";

    const jobPill = document.getElementById("jobPill");
    const videoPill = document.getElementById("videoPill");
    const vid = document.getElementById("vid");
    const pGrid = document.getElementById("pGrid");
    const openVideoBtn = document.getElementById("openVideoBtn");
    const backBtn = document.getElementById("backBtn");
    const winTxt = document.getElementById("winTxt");
    const impTxt = document.getElementById("impTxt");

    backBtn.onclick = () => location.href = "/upload.html";

    jobPill.textContent = jobId ? ("jobId: " + jobId) : "jobId: —";
    videoPill.textContent = videoUrl ? ("video: " + videoUrl) : "video: —";

    if (videoUrl) {
      vid.src = videoUrl;
      openVideoBtn.onclick = () => window.open(videoUrl, "_blank", "noopener");
    } else {
      openVideoBtn.disabled = true;
      openVideoBtn.style.opacity = .5;
    }

    // Render P1–P9 frames from /frames/{jobId}/p#.jpg
    if (jobId) {
      const frames = Array.from({length:9}, (_,i) => ({
        p: i+1,
        url: `/frames/${jobId}/p${i+1}.jpg`
      }));

      pGrid.innerHTML = frames.map(f => `
        <div class="p-card">
          <div class="p-label">P${f.p}</div>
          <a href="${f.url}" target="_blank" rel="noopener">
            <img src="${f.url}" alt="P${f.p}" />
          </a>
        </div>
      `).join("");
    } else {
      pGrid.innerHTML = '<div class="small">No jobId provided. Go to Upload and run an analysis.</div>';
    }

    // optional window info (if you pass it)
    if (winStart && winEnd) winTxt.textContent = `${Number(winEnd).toFixed(2)} - ${Number(winStart).toFixed(2)}s`;
    else winTxt.textContent = "—";

    if (impact) impTxt.textContent = Number(impact).toFixed(2);
    else impTxt.textContent = "—";
  </script>
</body>
</html>
