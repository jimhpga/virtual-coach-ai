<!doctype html><title>Report Test</title>
<pre id="out">RunningÂ¢Ã¢â€šÂ¬Ã‚Â¦</pre>
<script>
const out = m => (document.getElementById('out').textContent += "\n" + m);
(async()=>{
  try{
    out("Posting to /api/report Â¢Ã¢â€šÂ¬Ã‚Â¦");
    const r = await fetch('/api/report', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ jobId:'smoke', status:'ready', data:{ t: Date.now() }})
    });
    out("report status: " + r.status);
    const jr = await r.text(); out("report body: " + jr);

    out("Fetching /api/analyze?jobId=smoke Â¢Ã¢â€šÂ¬Ã‚Â¦");
    const a = await fetch('/api/analyze?jobId=smoke');
    out("analyze status: " + a.status);
    out("analyze body: " + await a.text());
  }catch(e){ out("Error: " + e.message); }
})();
</script>
