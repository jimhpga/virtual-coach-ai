<!doctype html><meta charset="utf-8"><title>API Smoke</title>
<body style="font:16px system-ui;padding:20px">
<h1>API Smoke</h1>
<p>
  <label>Base URL:
    <input id="base" size="50" value="https://virtualcoachai-homepage.vercel.app">
  </label>
</p>
<button id="go">POST /api/report then GET /api/analyze</button>
<pre id="out" style="white-space:pre-wrap;background:#111;color:#0f0;padding:10px;margin-top:10px"></pre>
<script>
const out = (m)=> (document.getElementById('out').textContent += m + "\n");
document.getElementById('go').onclick = async ()=>{
  const base = document.getElementById('base').value.replace(/\/$/,'');
  const key = "uploads/test-smoke-" + Date.now();
  out("Key: " + key);
  try{
    const r1 = await fetch(base + "/api/report", {
      method:"POST", headers:{ "Content-Type":"application/json" },
      body: JSON.stringify({ key, report:{ status:"ready", note:"smoke" } })
    });
    out("POST /api/report -> " + r1.status + " " + (await r1.text()));
    const r2 = await fetch(base + "/api/analyze?key=" + encodeURIComponent(key));
    out("GET  /api/analyze -> " + r2.status + " " + (await r2.text()));
  }catch(e){ out("ERR " + e); }
};
</script>
</body>
