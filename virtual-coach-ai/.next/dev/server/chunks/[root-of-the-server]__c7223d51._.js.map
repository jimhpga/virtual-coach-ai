{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Sites/virtual-coach-ai/virtual-coach-ai/src/app/api/test-ai/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport OpenAI from \"openai\";\r\n\r\nconst client = new OpenAI({\r\n  apiKey: process.env.OPENAI_API_KEY,\r\n});\r\n\r\nexport const runtime = \"nodejs\";\r\n\r\nexport async function POST(req: NextRequest) {\r\n  try {\r\n    const { prompt } = await req.json();\r\n\r\n    const response = await client.responses.create({\r\n      model: \"gpt-4.1-mini\",\r\n      input: `You are a golf coach. Answer briefly.\\n\\nQuestion: ${prompt}`,\r\n    });\r\n\r\n    const first = response.output[0];\r\n    let text = \"No text returned\";\r\n\r\n    if (first.type === \"message\") {\r\n      const contentItem = first.content.find(\r\n        (c: any) => c.type === \"output_text\"\r\n      );\r\n      if (contentItem?.text) {\r\n        text = contentItem.text;\r\n      }\r\n    }\r\n\r\n    return NextResponse.json({ ok: true, answer: text });\r\n  } catch (err: any) {\r\n    console.error(\"test-ai error:\", err);\r\n    return NextResponse.json(\r\n      { ok: false, error: err?.message || \"Unknown error\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;;;AAEA,MAAM,SAAS,IAAI,mLAAM,CAAC;IACxB,QAAQ,QAAQ,GAAG,CAAC,cAAc;AACpC;AAEO,MAAM,UAAU;AAEhB,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,IAAI;QAEjC,MAAM,WAAW,MAAM,OAAO,SAAS,CAAC,MAAM,CAAC;YAC7C,OAAO;YACP,OAAO,CAAC,mDAAmD,EAAE,QAAQ;QACvE;QAEA,MAAM,QAAQ,SAAS,MAAM,CAAC,EAAE;QAChC,IAAI,OAAO;QAEX,IAAI,MAAM,IAAI,KAAK,WAAW;YAC5B,MAAM,cAAc,MAAM,OAAO,CAAC,IAAI,CACpC,CAAC,IAAW,EAAE,IAAI,KAAK;YAEzB,IAAI,aAAa,MAAM;gBACrB,OAAO,YAAY,IAAI;YACzB;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAM,QAAQ;QAAK;IACpD,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC,kBAAkB;QAChC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,IAAI;YAAO,OAAO,KAAK,WAAW;QAAgB,GACpD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}